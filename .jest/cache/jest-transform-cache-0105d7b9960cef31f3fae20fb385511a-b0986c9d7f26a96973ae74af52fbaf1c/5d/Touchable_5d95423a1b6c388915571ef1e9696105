4546a6ca0fdc857cdb69322f0a80920e
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var BoundingDimensions = require('./BoundingDimensions');

var Platform = require('../../Utilities/Platform');

var Position = require('./Position');

var React = require('react');

var ReactNative = require('../../Renderer/shims/ReactNative');

var StyleSheet = require('../../StyleSheet/StyleSheet');

var TVEventHandler = require('../AppleTV/TVEventHandler');

var UIManager = require('../../ReactNative/UIManager');

var View = require('../View/View');

var SoundManager = require('../Sound/SoundManager');

var keyMirror = require('fbjs/lib/keyMirror');

var normalizeColor = require('../../StyleSheet/normalizeColor');

var extractSingleTouch = function extractSingleTouch(nativeEvent) {
  var touches = nativeEvent.touches;
  var changedTouches = nativeEvent.changedTouches;
  var hasTouches = touches && touches.length > 0;
  var hasChangedTouches = changedTouches && changedTouches.length > 0;
  return !hasTouches && hasChangedTouches ? changedTouches[0] : hasTouches ? touches[0] : nativeEvent;
};

var States = keyMirror({
  NOT_RESPONDER: null,
  RESPONDER_INACTIVE_PRESS_IN: null,
  RESPONDER_INACTIVE_PRESS_OUT: null,
  RESPONDER_ACTIVE_PRESS_IN: null,
  RESPONDER_ACTIVE_PRESS_OUT: null,
  RESPONDER_ACTIVE_LONG_PRESS_IN: null,
  RESPONDER_ACTIVE_LONG_PRESS_OUT: null,
  ERROR: null
});
var baseStatesConditions = {
  NOT_RESPONDER: false,
  RESPONDER_INACTIVE_PRESS_IN: false,
  RESPONDER_INACTIVE_PRESS_OUT: false,
  RESPONDER_ACTIVE_PRESS_IN: false,
  RESPONDER_ACTIVE_PRESS_OUT: false,
  RESPONDER_ACTIVE_LONG_PRESS_IN: false,
  RESPONDER_ACTIVE_LONG_PRESS_OUT: false,
  ERROR: false
};
var IsActive = (0, _extends2.default)({}, baseStatesConditions, {
  RESPONDER_ACTIVE_PRESS_OUT: true,
  RESPONDER_ACTIVE_PRESS_IN: true
});
var IsPressingIn = (0, _extends2.default)({}, baseStatesConditions, {
  RESPONDER_INACTIVE_PRESS_IN: true,
  RESPONDER_ACTIVE_PRESS_IN: true,
  RESPONDER_ACTIVE_LONG_PRESS_IN: true
});
var IsLongPressingIn = (0, _extends2.default)({}, baseStatesConditions, {
  RESPONDER_ACTIVE_LONG_PRESS_IN: true
});
var Signals = keyMirror({
  DELAY: null,
  RESPONDER_GRANT: null,
  RESPONDER_RELEASE: null,
  RESPONDER_TERMINATED: null,
  ENTER_PRESS_RECT: null,
  LEAVE_PRESS_RECT: null,
  LONG_PRESS_DETECTED: null
});
var Transitions = {
  NOT_RESPONDER: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.RESPONDER_INACTIVE_PRESS_IN,
    RESPONDER_RELEASE: States.ERROR,
    RESPONDER_TERMINATED: States.ERROR,
    ENTER_PRESS_RECT: States.ERROR,
    LEAVE_PRESS_RECT: States.ERROR,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_INACTIVE_PRESS_IN: {
    DELAY: States.RESPONDER_ACTIVE_PRESS_IN,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_INACTIVE_PRESS_OUT: {
    DELAY: States.RESPONDER_ACTIVE_PRESS_OUT,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_ACTIVE_PRESS_IN: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.RESPONDER_ACTIVE_LONG_PRESS_IN
  },
  RESPONDER_ACTIVE_PRESS_OUT: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_ACTIVE_LONG_PRESS_IN: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_OUT,
    LONG_PRESS_DETECTED: States.RESPONDER_ACTIVE_LONG_PRESS_IN
  },
  RESPONDER_ACTIVE_LONG_PRESS_OUT: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  error: {
    DELAY: States.NOT_RESPONDER,
    RESPONDER_GRANT: States.RESPONDER_INACTIVE_PRESS_IN,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.NOT_RESPONDER,
    LEAVE_PRESS_RECT: States.NOT_RESPONDER,
    LONG_PRESS_DETECTED: States.NOT_RESPONDER
  }
};
var HIGHLIGHT_DELAY_MS = 130;
var PRESS_EXPAND_PX = 20;
var LONG_PRESS_THRESHOLD = 500;
var LONG_PRESS_DELAY_MS = LONG_PRESS_THRESHOLD - HIGHLIGHT_DELAY_MS;
var LONG_PRESS_ALLOWED_MOVEMENT = 10;
var TouchableMixin = {
  componentDidMount: function componentDidMount() {
    if (!Platform.isTV) {
      return;
    }

    this._tvEventHandler = new TVEventHandler();

    this._tvEventHandler.enable(this, function (cmp, evt) {
      var myTag = ReactNative.findNodeHandle(cmp);
      evt.dispatchConfig = {};

      if (myTag === evt.tag) {
        if (evt.eventType === 'focus') {
          cmp.touchableHandleFocus(evt);
        } else if (evt.eventType === 'blur') {
          cmp.touchableHandleBlur(evt);
        } else if (evt.eventType === 'select' && Platform.OS !== 'android') {
          cmp.touchableHandlePress && !cmp.props.disabled && cmp.touchableHandlePress(evt);
        }
      }
    });
  },
  componentWillUnmount: function componentWillUnmount() {
    if (this._tvEventHandler) {
      this._tvEventHandler.disable();

      delete this._tvEventHandler;
    }

    this.touchableDelayTimeout && clearTimeout(this.touchableDelayTimeout);
    this.longPressDelayTimeout && clearTimeout(this.longPressDelayTimeout);
    this.pressOutDelayTimeout && clearTimeout(this.pressOutDelayTimeout);
  },
  touchableGetInitialState: function touchableGetInitialState() {
    return {
      touchable: {
        touchState: undefined,
        responderID: null
      }
    };
  },
  touchableHandleResponderTerminationRequest: function touchableHandleResponderTerminationRequest() {
    return !this.props.rejectResponderTermination;
  },
  touchableHandleStartShouldSetResponder: function touchableHandleStartShouldSetResponder() {
    return !this.props.disabled;
  },
  touchableLongPressCancelsPress: function touchableLongPressCancelsPress() {
    return true;
  },
  touchableHandleResponderGrant: function touchableHandleResponderGrant(e) {
    var dispatchID = e.currentTarget;
    e.persist();
    this.pressOutDelayTimeout && clearTimeout(this.pressOutDelayTimeout);
    this.pressOutDelayTimeout = null;
    this.state.touchable.touchState = States.NOT_RESPONDER;
    this.state.touchable.responderID = dispatchID;

    this._receiveSignal(Signals.RESPONDER_GRANT, e);

    var delayMS = this.touchableGetHighlightDelayMS !== undefined ? Math.max(this.touchableGetHighlightDelayMS(), 0) : HIGHLIGHT_DELAY_MS;
    delayMS = isNaN(delayMS) ? HIGHLIGHT_DELAY_MS : delayMS;

    if (delayMS !== 0) {
      this.touchableDelayTimeout = setTimeout(this._handleDelay.bind(this, e), delayMS);
    } else {
      this._handleDelay(e);
    }

    var longDelayMS = this.touchableGetLongPressDelayMS !== undefined ? Math.max(this.touchableGetLongPressDelayMS(), 10) : LONG_PRESS_DELAY_MS;
    longDelayMS = isNaN(longDelayMS) ? LONG_PRESS_DELAY_MS : longDelayMS;
    this.longPressDelayTimeout = setTimeout(this._handleLongDelay.bind(this, e), longDelayMS + delayMS);
  },
  touchableHandleResponderRelease: function touchableHandleResponderRelease(e) {
    this.pressInLocation = null;

    this._receiveSignal(Signals.RESPONDER_RELEASE, e);
  },
  touchableHandleResponderTerminate: function touchableHandleResponderTerminate(e) {
    this.pressInLocation = null;

    this._receiveSignal(Signals.RESPONDER_TERMINATED, e);
  },
  touchableHandleResponderMove: function touchableHandleResponderMove(e) {
    if (!this.state.touchable.positionOnActivate) {
      return;
    }

    var positionOnActivate = this.state.touchable.positionOnActivate;
    var dimensionsOnActivate = this.state.touchable.dimensionsOnActivate;
    var pressRectOffset = this.touchableGetPressRectOffset ? this.touchableGetPressRectOffset() : {
      left: PRESS_EXPAND_PX,
      right: PRESS_EXPAND_PX,
      top: PRESS_EXPAND_PX,
      bottom: PRESS_EXPAND_PX
    };
    var pressExpandLeft = pressRectOffset.left;
    var pressExpandTop = pressRectOffset.top;
    var pressExpandRight = pressRectOffset.right;
    var pressExpandBottom = pressRectOffset.bottom;
    var hitSlop = this.touchableGetHitSlop ? this.touchableGetHitSlop() : null;

    if (hitSlop) {
      pressExpandLeft += hitSlop.left || 0;
      pressExpandTop += hitSlop.top || 0;
      pressExpandRight += hitSlop.right || 0;
      pressExpandBottom += hitSlop.bottom || 0;
    }

    var touch = extractSingleTouch(e.nativeEvent);
    var pageX = touch && touch.pageX;
    var pageY = touch && touch.pageY;

    if (this.pressInLocation) {
      var movedDistance = this._getDistanceBetweenPoints(pageX, pageY, this.pressInLocation.pageX, this.pressInLocation.pageY);

      if (movedDistance > LONG_PRESS_ALLOWED_MOVEMENT) {
        this._cancelLongPressDelayTimeout();
      }
    }

    var isTouchWithinActive = pageX > positionOnActivate.left - pressExpandLeft && pageY > positionOnActivate.top - pressExpandTop && pageX < positionOnActivate.left + dimensionsOnActivate.width + pressExpandRight && pageY < positionOnActivate.top + dimensionsOnActivate.height + pressExpandBottom;

    if (isTouchWithinActive) {
      var prevState = this.state.touchable.touchState;

      this._receiveSignal(Signals.ENTER_PRESS_RECT, e);

      var curState = this.state.touchable.touchState;

      if (curState === States.RESPONDER_INACTIVE_PRESS_IN && prevState !== States.RESPONDER_INACTIVE_PRESS_IN) {
        this._cancelLongPressDelayTimeout();
      }
    } else {
      this._cancelLongPressDelayTimeout();

      this._receiveSignal(Signals.LEAVE_PRESS_RECT, e);
    }
  },
  touchableHandleFocus: function touchableHandleFocus(e) {
    this.props.onFocus && this.props.onFocus(e);
  },
  touchableHandleBlur: function touchableHandleBlur(e) {
    this.props.onBlur && this.props.onBlur(e);
  },
  _remeasureMetricsOnActivation: function _remeasureMetricsOnActivation() {
    var responderID = this.state.touchable.responderID;

    if (responderID == null) {
      return;
    }

    if (typeof responderID === 'number') {
      UIManager.measure(responderID, this._handleQueryLayout);
    } else {
      responderID.measure(this._handleQueryLayout);
    }
  },
  _handleQueryLayout: function _handleQueryLayout(l, t, w, h, globalX, globalY) {
    if (!l && !t && !w && !h && !globalX && !globalY) {
      return;
    }

    this.state.touchable.positionOnActivate && Position.release(this.state.touchable.positionOnActivate);
    this.state.touchable.dimensionsOnActivate && BoundingDimensions.release(this.state.touchable.dimensionsOnActivate);
    this.state.touchable.positionOnActivate = Position.getPooled(globalX, globalY);
    this.state.touchable.dimensionsOnActivate = BoundingDimensions.getPooled(w, h);
  },
  _handleDelay: function _handleDelay(e) {
    this.touchableDelayTimeout = null;

    this._receiveSignal(Signals.DELAY, e);
  },
  _handleLongDelay: function _handleLongDelay(e) {
    this.longPressDelayTimeout = null;
    var curState = this.state.touchable.touchState;

    if (curState === States.RESPONDER_ACTIVE_PRESS_IN || curState === States.RESPONDER_ACTIVE_LONG_PRESS_IN) {
      this._receiveSignal(Signals.LONG_PRESS_DETECTED, e);
    }
  },
  _receiveSignal: function _receiveSignal(signal, e) {
    var responderID = this.state.touchable.responderID;
    var curState = this.state.touchable.touchState;
    var nextState = Transitions[curState] && Transitions[curState][signal];

    if (!responderID && signal === Signals.RESPONDER_RELEASE) {
      return;
    }

    if (!nextState) {
      throw new Error('Unrecognized signal `' + signal + '` or state `' + curState + '` for Touchable responder `' + typeof this.state.touchable.responderID === 'number' ? this.state.touchable.responderID : 'host component' + '`');
    }

    if (nextState === States.ERROR) {
      throw new Error('Touchable cannot transition from `' + curState + '` to `' + signal + '` for responder `' + typeof this.state.touchable.responderID === 'number' ? this.state.touchable.responderID : '<<host component>>' + '`');
    }

    if (curState !== nextState) {
      this._performSideEffectsForTransition(curState, nextState, signal, e);

      this.state.touchable.touchState = nextState;
    }
  },
  _cancelLongPressDelayTimeout: function _cancelLongPressDelayTimeout() {
    this.longPressDelayTimeout && clearTimeout(this.longPressDelayTimeout);
    this.longPressDelayTimeout = null;
  },
  _isHighlight: function _isHighlight(state) {
    return state === States.RESPONDER_ACTIVE_PRESS_IN || state === States.RESPONDER_ACTIVE_LONG_PRESS_IN;
  },
  _savePressInLocation: function _savePressInLocation(e) {
    var touch = extractSingleTouch(e.nativeEvent);
    var pageX = touch && touch.pageX;
    var pageY = touch && touch.pageY;
    var locationX = touch && touch.locationX;
    var locationY = touch && touch.locationY;
    this.pressInLocation = {
      pageX: pageX,
      pageY: pageY,
      locationX: locationX,
      locationY: locationY
    };
  },
  _getDistanceBetweenPoints: function _getDistanceBetweenPoints(aX, aY, bX, bY) {
    var deltaX = aX - bX;
    var deltaY = aY - bY;
    return Math.sqrt(deltaX * deltaX + deltaY * deltaY);
  },
  _performSideEffectsForTransition: function _performSideEffectsForTransition(curState, nextState, signal, e) {
    var curIsHighlight = this._isHighlight(curState);

    var newIsHighlight = this._isHighlight(nextState);

    var isFinalSignal = signal === Signals.RESPONDER_TERMINATED || signal === Signals.RESPONDER_RELEASE;

    if (isFinalSignal) {
      this._cancelLongPressDelayTimeout();
    }

    var isInitialTransition = curState === States.NOT_RESPONDER && nextState === States.RESPONDER_INACTIVE_PRESS_IN;
    var isActiveTransition = !IsActive[curState] && IsActive[nextState];

    if (isInitialTransition || isActiveTransition) {
      this._remeasureMetricsOnActivation();
    }

    if (IsPressingIn[curState] && signal === Signals.LONG_PRESS_DETECTED) {
      this.touchableHandleLongPress && this.touchableHandleLongPress(e);
    }

    if (newIsHighlight && !curIsHighlight) {
      this._startHighlight(e);
    } else if (!newIsHighlight && curIsHighlight) {
      this._endHighlight(e);
    }

    if (IsPressingIn[curState] && signal === Signals.RESPONDER_RELEASE) {
      var hasLongPressHandler = !!this.props.onLongPress;
      var pressIsLongButStillCallOnPress = IsLongPressingIn[curState] && (!hasLongPressHandler || !this.touchableLongPressCancelsPress());
      var shouldInvokePress = !IsLongPressingIn[curState] || pressIsLongButStillCallOnPress;

      if (shouldInvokePress && this.touchableHandlePress) {
        if (!newIsHighlight && !curIsHighlight) {
          this._startHighlight(e);

          this._endHighlight(e);
        }

        if (Platform.OS === 'android' && !this.props.touchSoundDisabled) {
          SoundManager.playTouchSound();
        }

        this.touchableHandlePress(e);
      }
    }

    this.touchableDelayTimeout && clearTimeout(this.touchableDelayTimeout);
    this.touchableDelayTimeout = null;
  },
  _startHighlight: function _startHighlight(e) {
    this._savePressInLocation(e);

    this.touchableHandleActivePressIn && this.touchableHandleActivePressIn(e);
  },
  _endHighlight: function _endHighlight(e) {
    var _this = this;

    if (this.touchableHandleActivePressOut) {
      if (this.touchableGetPressOutDelayMS && this.touchableGetPressOutDelayMS()) {
        this.pressOutDelayTimeout = setTimeout(function () {
          _this.touchableHandleActivePressOut(e);
        }, this.touchableGetPressOutDelayMS());
      } else {
        this.touchableHandleActivePressOut(e);
      }
    }
  },
  withoutDefaultFocusAndBlur: {}
};
var touchableHandleFocus = TouchableMixin.touchableHandleFocus,
    touchableHandleBlur = TouchableMixin.touchableHandleBlur,
    TouchableMixinWithoutDefaultFocusAndBlur = (0, _objectWithoutProperties2.default)(TouchableMixin, ["touchableHandleFocus", "touchableHandleBlur"]);
TouchableMixin.withoutDefaultFocusAndBlur = TouchableMixinWithoutDefaultFocusAndBlur;
var Touchable = {
  Mixin: TouchableMixin,
  TOUCH_TARGET_DEBUG: false,
  renderDebugView: function renderDebugView(_ref) {
    var color = _ref.color,
        hitSlop = _ref.hitSlop;

    if (!Touchable.TOUCH_TARGET_DEBUG) {
      return null;
    }

    if (!__DEV__) {
      throw Error('Touchable.TOUCH_TARGET_DEBUG should not be enabled in prod!');
    }

    var debugHitSlopStyle = {};
    hitSlop = hitSlop || {
      top: 0,
      bottom: 0,
      left: 0,
      right: 0
    };

    for (var key in hitSlop) {
      debugHitSlopStyle[key] = -hitSlop[key];
    }

    var normalizedColor = normalizeColor(color);

    if (typeof normalizedColor !== 'number') {
      return null;
    }

    var hexColor = '#' + ('00000000' + normalizedColor.toString(16)).substr(-8);
    return React.createElement(View, {
      pointerEvents: "none",
      style: [styles.debug, (0, _extends2.default)({
        borderColor: hexColor.slice(0, -2) + '55',
        backgroundColor: hexColor.slice(0, -2) + '0F'
      }, debugHitSlopStyle)]
    });
  }
};
var styles = StyleSheet.create({
  debug: {
    position: 'absolute',
    borderWidth: 1,
    borderStyle: 'dashed'
  }
});
module.exports = Touchable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZS5qcyJdLCJuYW1lcyI6WyJCb3VuZGluZ0RpbWVuc2lvbnMiLCJyZXF1aXJlIiwiUGxhdGZvcm0iLCJQb3NpdGlvbiIsIlJlYWN0IiwiUmVhY3ROYXRpdmUiLCJTdHlsZVNoZWV0IiwiVFZFdmVudEhhbmRsZXIiLCJVSU1hbmFnZXIiLCJWaWV3IiwiU291bmRNYW5hZ2VyIiwia2V5TWlycm9yIiwibm9ybWFsaXplQ29sb3IiLCJleHRyYWN0U2luZ2xlVG91Y2giLCJuYXRpdmVFdmVudCIsInRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsImhhc1RvdWNoZXMiLCJsZW5ndGgiLCJoYXNDaGFuZ2VkVG91Y2hlcyIsIlN0YXRlcyIsIk5PVF9SRVNQT05ERVIiLCJSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU4iLCJSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUIiwiUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTiIsIlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUIiwiUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOIiwiUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVCIsIkVSUk9SIiwiYmFzZVN0YXRlc0NvbmRpdGlvbnMiLCJJc0FjdGl2ZSIsIklzUHJlc3NpbmdJbiIsIklzTG9uZ1ByZXNzaW5nSW4iLCJTaWduYWxzIiwiREVMQVkiLCJSRVNQT05ERVJfR1JBTlQiLCJSRVNQT05ERVJfUkVMRUFTRSIsIlJFU1BPTkRFUl9URVJNSU5BVEVEIiwiRU5URVJfUFJFU1NfUkVDVCIsIkxFQVZFX1BSRVNTX1JFQ1QiLCJMT05HX1BSRVNTX0RFVEVDVEVEIiwiVHJhbnNpdGlvbnMiLCJlcnJvciIsIkhJR0hMSUdIVF9ERUxBWV9NUyIsIlBSRVNTX0VYUEFORF9QWCIsIkxPTkdfUFJFU1NfVEhSRVNIT0xEIiwiTE9OR19QUkVTU19ERUxBWV9NUyIsIkxPTkdfUFJFU1NfQUxMT1dFRF9NT1ZFTUVOVCIsIlRvdWNoYWJsZU1peGluIiwiY29tcG9uZW50RGlkTW91bnQiLCJpc1RWIiwiX3R2RXZlbnRIYW5kbGVyIiwiZW5hYmxlIiwiY21wIiwiZXZ0IiwibXlUYWciLCJmaW5kTm9kZUhhbmRsZSIsImRpc3BhdGNoQ29uZmlnIiwidGFnIiwiZXZlbnRUeXBlIiwidG91Y2hhYmxlSGFuZGxlRm9jdXMiLCJ0b3VjaGFibGVIYW5kbGVCbHVyIiwiT1MiLCJ0b3VjaGFibGVIYW5kbGVQcmVzcyIsInByb3BzIiwiZGlzYWJsZWQiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImRpc2FibGUiLCJ0b3VjaGFibGVEZWxheVRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJsb25nUHJlc3NEZWxheVRpbWVvdXQiLCJwcmVzc091dERlbGF5VGltZW91dCIsInRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSIsInRvdWNoYWJsZSIsInRvdWNoU3RhdGUiLCJ1bmRlZmluZWQiLCJyZXNwb25kZXJJRCIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCIsInJlamVjdFJlc3BvbmRlclRlcm1pbmF0aW9uIiwidG91Y2hhYmxlSGFuZGxlU3RhcnRTaG91bGRTZXRSZXNwb25kZXIiLCJ0b3VjaGFibGVMb25nUHJlc3NDYW5jZWxzUHJlc3MiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJHcmFudCIsImUiLCJkaXNwYXRjaElEIiwiY3VycmVudFRhcmdldCIsInBlcnNpc3QiLCJzdGF0ZSIsIl9yZWNlaXZlU2lnbmFsIiwiZGVsYXlNUyIsInRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVMiLCJNYXRoIiwibWF4IiwiaXNOYU4iLCJzZXRUaW1lb3V0IiwiX2hhbmRsZURlbGF5IiwiYmluZCIsImxvbmdEZWxheU1TIiwidG91Y2hhYmxlR2V0TG9uZ1ByZXNzRGVsYXlNUyIsIl9oYW5kbGVMb25nRGVsYXkiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlIiwicHJlc3NJbkxvY2F0aW9uIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZSIsInBvc2l0aW9uT25BY3RpdmF0ZSIsImRpbWVuc2lvbnNPbkFjdGl2YXRlIiwicHJlc3NSZWN0T2Zmc2V0IiwidG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0IiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwicHJlc3NFeHBhbmRMZWZ0IiwicHJlc3NFeHBhbmRUb3AiLCJwcmVzc0V4cGFuZFJpZ2h0IiwicHJlc3NFeHBhbmRCb3R0b20iLCJoaXRTbG9wIiwidG91Y2hhYmxlR2V0SGl0U2xvcCIsInRvdWNoIiwicGFnZVgiLCJwYWdlWSIsIm1vdmVkRGlzdGFuY2UiLCJfZ2V0RGlzdGFuY2VCZXR3ZWVuUG9pbnRzIiwiX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dCIsImlzVG91Y2hXaXRoaW5BY3RpdmUiLCJ3aWR0aCIsImhlaWdodCIsInByZXZTdGF0ZSIsImN1clN0YXRlIiwib25Gb2N1cyIsIm9uQmx1ciIsIl9yZW1lYXN1cmVNZXRyaWNzT25BY3RpdmF0aW9uIiwibWVhc3VyZSIsIl9oYW5kbGVRdWVyeUxheW91dCIsImwiLCJ0IiwidyIsImgiLCJnbG9iYWxYIiwiZ2xvYmFsWSIsInJlbGVhc2UiLCJnZXRQb29sZWQiLCJzaWduYWwiLCJuZXh0U3RhdGUiLCJFcnJvciIsIl9wZXJmb3JtU2lkZUVmZmVjdHNGb3JUcmFuc2l0aW9uIiwiX2lzSGlnaGxpZ2h0IiwiX3NhdmVQcmVzc0luTG9jYXRpb24iLCJsb2NhdGlvblgiLCJsb2NhdGlvblkiLCJhWCIsImFZIiwiYlgiLCJiWSIsImRlbHRhWCIsImRlbHRhWSIsInNxcnQiLCJjdXJJc0hpZ2hsaWdodCIsIm5ld0lzSGlnaGxpZ2h0IiwiaXNGaW5hbFNpZ25hbCIsImlzSW5pdGlhbFRyYW5zaXRpb24iLCJpc0FjdGl2ZVRyYW5zaXRpb24iLCJ0b3VjaGFibGVIYW5kbGVMb25nUHJlc3MiLCJfc3RhcnRIaWdobGlnaHQiLCJfZW5kSGlnaGxpZ2h0IiwiaGFzTG9uZ1ByZXNzSGFuZGxlciIsIm9uTG9uZ1ByZXNzIiwicHJlc3NJc0xvbmdCdXRTdGlsbENhbGxPblByZXNzIiwic2hvdWxkSW52b2tlUHJlc3MiLCJ0b3VjaFNvdW5kRGlzYWJsZWQiLCJwbGF5VG91Y2hTb3VuZCIsInRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW4iLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dCIsInRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUyIsIndpdGhvdXREZWZhdWx0Rm9jdXNBbmRCbHVyIiwiVG91Y2hhYmxlTWl4aW5XaXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1ciIsIlRvdWNoYWJsZSIsIk1peGluIiwiVE9VQ0hfVEFSR0VUX0RFQlVHIiwicmVuZGVyRGVidWdWaWV3IiwiY29sb3IiLCJfX0RFVl9fIiwiZGVidWdIaXRTbG9wU3R5bGUiLCJrZXkiLCJub3JtYWxpemVkQ29sb3IiLCJoZXhDb2xvciIsInRvU3RyaW5nIiwic3Vic3RyIiwic3R5bGVzIiwiZGVidWciLCJib3JkZXJDb2xvciIsInNsaWNlIiwiYmFja2dyb3VuZENvbG9yIiwiY3JlYXRlIiwicG9zaXRpb24iLCJib3JkZXJXaWR0aCIsImJvcmRlclN0eWxlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBVUE7Ozs7Ozs7O0FBRUEsSUFBTUEsa0JBQWtCLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUFsQzs7QUFDQSxJQUFNQyxRQUFRLEdBQUdELE9BQU8sQ0FBQywwQkFBRCxDQUF4Qjs7QUFDQSxJQUFNRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyxZQUFELENBQXhCOztBQUNBLElBQU1HLEtBQUssR0FBR0gsT0FBTyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0EsSUFBTUksV0FBVyxHQUFHSixPQUFPLENBQUMsa0NBQUQsQ0FBM0I7O0FBQ0EsSUFBTUssVUFBVSxHQUFHTCxPQUFPLENBQUMsNkJBQUQsQ0FBMUI7O0FBQ0EsSUFBTU0sY0FBYyxHQUFHTixPQUFPLENBQUMsMkJBQUQsQ0FB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a0IsQ0FBQyxDQUFuQixJQUF3QixJQU5sQztBQU9IQyxRQUFBQSxlQUFlLEVBQUVQLFFBQVEsQ0FBQ00sS0FBVCxDQUFlLENBQWYsRUFBa0IsQ0FBQyxDQUFuQixJQUF3QjtBQVB0QyxTQVFBVCxpQkFSQTtBQUZULE1BREY7QUFnQkQ7QUFqRGUsQ0FBbEI7QUFvREEsSUFBTU0sTUFBTSxHQUFHckwsVUFBVSxDQUFDMEwsTUFBWCxDQUFrQjtBQUMvQkosRUFBQUEsS0FBSyxFQUFFO0FBQ0xLLElBQUFBLFFBQVEsRUFBRSxVQURMO0FBRUxDLElBQUFBLFdBQVcsRUFBRSxDQUZSO0FBR0xDLElBQUFBLFdBQVcsRUFBRTtBQUhSO0FBRHdCLENBQWxCLENBQWY7QUFRQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCdEIsU0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBCb3VuZGluZ0RpbWVuc2lvbnMgPSByZXF1aXJlKCcuL0JvdW5kaW5nRGltZW5zaW9ucycpO1xuY29uc3QgUGxhdGZvcm0gPSByZXF1aXJlKCcuLi8uLi9VdGlsaXRpZXMvUGxhdGZvcm0nKTtcbmNvbnN0IFBvc2l0aW9uID0gcmVxdWlyZSgnLi9Qb3NpdGlvbicpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuY29uc3QgUmVhY3ROYXRpdmUgPSByZXF1aXJlKCcuLi8uLi9SZW5kZXJlci9zaGltcy9SZWFjdE5hdGl2ZScpO1xuY29uc3QgU3R5bGVTaGVldCA9IHJlcXVpcmUoJy4uLy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCcpO1xuY29uc3QgVFZFdmVudEhhbmRsZXIgPSByZXF1aXJlKCcuLi9BcHBsZVRWL1RWRXZlbnRIYW5kbGVyJyk7XG5jb25zdCBVSU1hbmFnZXIgPSByZXF1aXJlKCcuLi8uLi9SZWFjdE5hdGl2ZS9VSU1hbmFnZXInKTtcbmNvbnN0IFZpZXcgPSByZXF1aXJlKCcuLi9WaWV3L1ZpZXcnKTtcbmNvbnN0IFNvdW5kTWFuYWdlciA9IHJlcXVpcmUoJy4uL1NvdW5kL1NvdW5kTWFuYWdlcicpO1xuXG5jb25zdCBrZXlNaXJyb3IgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlNaXJyb3InKTtcbmNvbnN0IG5vcm1hbGl6ZUNvbG9yID0gcmVxdWlyZSgnLi4vLi4vU3R5bGVTaGVldC9ub3JtYWxpemVDb2xvcicpO1xuXG5pbXBvcnQgdHlwZSB7RWRnZUluc2V0c1Byb3B9IGZyb20gJy4uLy4uL1N0eWxlU2hlZXQvRWRnZUluc2V0c1Byb3BUeXBlJztcbmltcG9ydCB0eXBlIHtQcmVzc0V2ZW50fSBmcm9tICcuLi8uLi9UeXBlcy9Db3JlRXZlbnRUeXBlcyc7XG5cbmNvbnN0IGV4dHJhY3RTaW5nbGVUb3VjaCA9IG5hdGl2ZUV2ZW50ID0+IHtcbiAgY29uc3QgdG91Y2hlcyA9IG5hdGl2ZUV2ZW50LnRvdWNoZXM7XG4gIGNvbnN0IGNoYW5nZWRUb3VjaGVzID0gbmF0aXZlRXZlbnQuY2hhbmdlZFRvdWNoZXM7XG4gIGNvbnN0IGhhc1RvdWNoZXMgPSB0b3VjaGVzICYmIHRvdWNoZXMubGVuZ3RoID4gMDtcbiAgY29uc3QgaGFzQ2hhbmdlZFRvdWNoZXMgPSBjaGFuZ2VkVG91Y2hlcyAmJiBjaGFuZ2VkVG91Y2hlcy5sZW5ndGggPiAwO1xuXG4gIHJldHVybiAhaGFzVG91Y2hlcyAmJiBoYXNDaGFuZ2VkVG91Y2hlc1xuICAgID8gY2hhbmdlZFRvdWNoZXNbMF1cbiAgICA6IGhhc1RvdWNoZXNcbiAgICA/IHRvdWNoZXNbMF1cbiAgICA6IG5hdGl2ZUV2ZW50O1xufTtcblxuLyoqXG4gKiBgVG91Y2hhYmxlYDogVGFwcyBkb25lIHJpZ2h0LlxuICpcbiAqIFlvdSBob29rIHlvdXIgYFJlc3BvbmRlckV2ZW50UGx1Z2luYCBldmVudHMgaW50byBgVG91Y2hhYmxlYC4gYFRvdWNoYWJsZWBcbiAqIHdpbGwgbWVhc3VyZSB0aW1lL2dlb21ldHJ5IGFuZCB0ZWxscyB5b3Ugd2hlbiB0byBnaXZlIGZlZWRiYWNrIHRvIHRoZSB1c2VyLlxuICpcbiAqID09PT09PT09PT09PT09PT09PT09PT0gVG91Y2hhYmxlIFR1dG9yaWFsID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFRoZSBgVG91Y2hhYmxlYCBtaXhpbiBoZWxwcyB5b3UgaGFuZGxlIHRoZSBcInByZXNzXCIgaW50ZXJhY3Rpb24uIEl0IGFuYWx5emVzXG4gKiB0aGUgZ2VvbWV0cnkgb2YgZWxlbWVudHMsIGFuZCBvYnNlcnZlcyB3aGVuIGFub3RoZXIgcmVzcG9uZGVyIChzY3JvbGwgdmlld1xuICogZXRjKSBoYXMgc3RvbGVuIHRoZSB0b3VjaCBsb2NrLiBJdCBub3RpZmllcyB5b3VyIGNvbXBvbmVudCB3aGVuIGl0IHNob3VsZFxuICogZ2l2ZSBmZWVkYmFjayB0byB0aGUgdXNlci4gKGJvdW5jaW5nL2hpZ2hsaWdodGluZy91bmhpZ2hsaWdodGluZykuXG4gKlxuICogLSBXaGVuIGEgdG91Y2ggd2FzIGFjdGl2YXRlZCAodHlwaWNhbGx5IHlvdSBoaWdobGlnaHQpXG4gKiAtIFdoZW4gYSB0b3VjaCB3YXMgZGVhY3RpdmF0ZWQgKHR5cGljYWxseSB5b3UgdW5oaWdobGlnaHQpXG4gKiAtIFdoZW4gYSB0b3VjaCB3YXMgXCJwcmVzc2VkXCIgLSBhIHRvdWNoIGVuZGVkIHdoaWxlIHN0aWxsIHdpdGhpbiB0aGUgZ2VvbWV0cnlcbiAqICAgb2YgdGhlIGVsZW1lbnQsIGFuZCBubyBvdGhlciBlbGVtZW50IChsaWtlIHNjcm9sbGVyKSBoYXMgXCJzdG9sZW5cIiB0b3VjaFxuICogICBsb2NrIChcInJlc3BvbmRlclwiKSAoVHlwaWNhbGx5IHlvdSBib3VuY2UgdGhlIGVsZW1lbnQpLlxuICpcbiAqIEEgZ29vZCB0YXAgaW50ZXJhY3Rpb24gaXNuJ3QgYXMgc2ltcGxlIGFzIHlvdSBtaWdodCB0aGluay4gVGhlcmUgc2hvdWxkIGJlIGFcbiAqIHNsaWdodCBkZWxheSBiZWZvcmUgc2hvd2luZyBhIGhpZ2hsaWdodCB3aGVuIHN0YXJ0aW5nIGEgdG91Y2guIElmIGFcbiAqIHN1YnNlcXVlbnQgdG91Y2ggbW92ZSBleGNlZWRzIHRoZSBib3VuZGFyeSBvZiB0aGUgZWxlbWVudCwgaXQgc2hvdWxkXG4gKiB1bmhpZ2hsaWdodCwgYnV0IGlmIHRoYXQgc2FtZSB0b3VjaCBpcyBicm91Z2h0IGJhY2sgd2l0aGluIHRoZSBib3VuZGFyeSwgaXRcbiAqIHNob3VsZCByZWhpZ2hsaWdodCBhZ2Fpbi4gQSB0b3VjaCBjYW4gbW92ZSBpbiBhbmQgb3V0IG9mIHRoYXQgYm91bmRhcnlcbiAqIHNldmVyYWwgdGltZXMsIGVhY2ggdGltZSB0b2dnbGluZyBoaWdobGlnaHRpbmcsIGJ1dCBhIFwicHJlc3NcIiBpcyBvbmx5XG4gKiB0cmlnZ2VyZWQgaWYgdGhhdCB0b3VjaCBlbmRzIHdoaWxlIHdpdGhpbiB0aGUgZWxlbWVudCdzIGJvdW5kYXJ5IGFuZCBub1xuICogc2Nyb2xsZXIgKG9yIGFueXRoaW5nIGVsc2UpIGhhcyBzdG9sZW4gdGhlIGxvY2sgb24gdG91Y2hlcy5cbiAqXG4gKiBUbyBjcmVhdGUgYSBuZXcgdHlwZSBvZiBjb21wb25lbnQgdGhhdCBoYW5kbGVzIGludGVyYWN0aW9uIHVzaW5nIHRoZVxuICogYFRvdWNoYWJsZWAgbWl4aW4sIGRvIHRoZSBmb2xsb3dpbmc6XG4gKlxuICogLSBJbml0aWFsaXplIHRoZSBgVG91Y2hhYmxlYCBzdGF0ZS5cbiAqXG4gKiAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIG1lcmdlKHRoaXMudG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlKCksIHlvdXJDb21wb25lbnRTdGF0ZSk7XG4gKiAgIH1cbiAqXG4gKiAtIENob29zZSB0aGUgcmVuZGVyZWQgY29tcG9uZW50IHdobydzIHRvdWNoZXMgc2hvdWxkIHN0YXJ0IHRoZSBpbnRlcmFjdGl2ZVxuICogICBzZXF1ZW5jZS4gT24gdGhhdCByZW5kZXJlZCBub2RlLCBmb3J3YXJkIGFsbCBgVG91Y2hhYmxlYCByZXNwb25kZXJcbiAqICAgaGFuZGxlcnMuIFlvdSBjYW4gY2hvb3NlIGFueSByZW5kZXJlZCBub2RlIHlvdSBsaWtlLiBDaG9vc2UgYSBub2RlIHdob3NlXG4gKiAgIGhpdCB0YXJnZXQgeW91J2QgbGlrZSB0byBpbnN0aWdhdGUgdGhlIGludGVyYWN0aW9uIHNlcXVlbmNlOlxuICpcbiAqICAgLy8gSW4gcmVuZGVyIGZ1bmN0aW9uOlxuICogICByZXR1cm4gKFxuICogICAgIDxWaWV3XG4gKiAgICAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyfVxuICogICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3Q9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0fVxuICogICAgICAgb25SZXNwb25kZXJHcmFudD17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJHcmFudH1cbiAqICAgICAgIG9uUmVzcG9uZGVyTW92ZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlfVxuICogICAgICAgb25SZXNwb25kZXJSZWxlYXNlPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclJlbGVhc2V9XG4gKiAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0ZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGV9PlxuICogICAgICAgPFZpZXc+XG4gKiAgICAgICAgIEV2ZW4gdGhvdWdoIHRoZSBoaXQgZGV0ZWN0aW9uL2ludGVyYWN0aW9ucyBhcmUgdHJpZ2dlcmVkIGJ5IHRoZVxuICogICAgICAgICB3cmFwcGluZyAodHlwaWNhbGx5IGxhcmdlcikgbm9kZSwgd2UgdXN1YWxseSBlbmQgdXAgaW1wbGVtZW50aW5nXG4gKiAgICAgICAgIGN1c3RvbSBsb2dpYyB0aGF0IGhpZ2hsaWdodHMgdGhpcyBpbm5lciBvbmUuXG4gKiAgICAgICA8L1ZpZXc+XG4gKiAgICAgPC9WaWV3PlxuICogICApO1xuICpcbiAqIC0gWW91IG1heSBzZXQgdXAgeW91ciBvd24gaGFuZGxlcnMgZm9yIGVhY2ggb2YgdGhlc2UgZXZlbnRzLCBzbyBsb25nIGFzIHlvdVxuICogICBhbHNvIGludm9rZSB0aGUgYHRvdWNoYWJsZSpgIGhhbmRsZXJzIGluc2lkZSBvZiB5b3VyIGN1c3RvbSBoYW5kbGVyLlxuICpcbiAqIC0gSW1wbGVtZW50IHRoZSBoYW5kbGVycyBvbiB5b3VyIGNvbXBvbmVudCBjbGFzcyBpbiBvcmRlciB0byBwcm92aWRlXG4gKiAgIGZlZWRiYWNrIHRvIHRoZSB1c2VyLiBTZWUgZG9jdW1lbnRhdGlvbiBmb3IgZWFjaCBvZiB0aGVzZSBjbGFzcyBtZXRob2RzXG4gKiAgIHRoYXQgeW91IHNob3VsZCBpbXBsZW1lbnQuXG4gKlxuICogICB0b3VjaGFibGVIYW5kbGVQcmVzczogZnVuY3Rpb24oKSB7XG4gKiAgICAgIHRoaXMucGVyZm9ybUJvdW5jZUFuaW1hdGlvbigpOyAgLy8gb3Igd2hhdGV2ZXIgeW91IHdhbnQgdG8gZG8uXG4gKiAgIH0sXG4gKiAgIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW46IGZ1bmN0aW9uKCkge1xuICogICAgIHRoaXMuYmVnaW5IaWdobGlnaHRpbmcoLi4uKTsgIC8vIFdoYXRldmVyIHlvdSBsaWtlIHRvIGNvbnZleSBhY3RpdmF0aW9uXG4gKiAgIH0sXG4gKiAgIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0OiBmdW5jdGlvbigpIHtcbiAqICAgICB0aGlzLmVuZEhpZ2hsaWdodGluZyguLi4pOyAgLy8gV2hhdGV2ZXIgeW91IGxpa2UgdG8gY29udmV5IGRlYWN0aXZhdGlvblxuICogICB9LFxuICpcbiAqIC0gVGhlcmUgYXJlIG1vcmUgYWR2YW5jZWQgbWV0aG9kcyB5b3UgY2FuIGltcGxlbWVudCAoc2VlIGRvY3VtZW50YXRpb24gYmVsb3cpOlxuICogICB0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TOiBmdW5jdGlvbigpIHtcbiAqICAgICByZXR1cm4gMjA7XG4gKiAgIH1cbiAqICAgLy8gSW4gcHJhY3RpY2UsICphbHdheXMqIHVzZSBhIHByZWRlY2xhcmVkIGNvbnN0YW50IChjb25zZXJ2ZSBtZW1vcnkpLlxuICogICB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQ6IGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiB7dG9wOiAyMCwgbGVmdDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiAxMDB9O1xuICogICB9XG4gKi9cblxuLyoqXG4gKiBUb3VjaGFibGUgc3RhdGVzLlxuICovXG5cbmNvbnN0IFN0YXRlcyA9IGtleU1pcnJvcih7XG4gIE5PVF9SRVNQT05ERVI6IG51bGwsIC8vIE5vdCB0aGUgcmVzcG9uZGVyXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTjogbnVsbCwgLy8gUmVzcG9uZGVyLCBpbmFjdGl2ZSwgaW4gdGhlIGBQcmVzc1JlY3RgXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19PVVQ6IG51bGwsIC8vIFJlc3BvbmRlciwgaW5hY3RpdmUsIG91dCBvZiBgUHJlc3NSZWN0YFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOOiBudWxsLCAvLyBSZXNwb25kZXIsIGFjdGl2ZSwgaW4gdGhlIGBQcmVzc1JlY3RgXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUOiBudWxsLCAvLyBSZXNwb25kZXIsIGFjdGl2ZSwgb3V0IG9mIGBQcmVzc1JlY3RgXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTjogbnVsbCwgLy8gUmVzcG9uZGVyLCBhY3RpdmUsIGluIHRoZSBgUHJlc3NSZWN0YCwgYWZ0ZXIgbG9uZyBwcmVzcyB0aHJlc2hvbGRcbiAgUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVDogbnVsbCwgLy8gUmVzcG9uZGVyLCBhY3RpdmUsIG91dCBvZiBgUHJlc3NSZWN0YCwgYWZ0ZXIgbG9uZyBwcmVzcyB0aHJlc2hvbGRcbiAgRVJST1I6IG51bGwsXG59KTtcblxudHlwZSBTdGF0ZSA9XG4gIHwgdHlwZW9mIFN0YXRlcy5OT1RfUkVTUE9OREVSXG4gIHwgdHlwZW9mIFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU5cbiAgfCB0eXBlb2YgU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19PVVRcbiAgfCB0eXBlb2YgU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU5cbiAgfCB0eXBlb2YgU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUXG4gIHwgdHlwZW9mIFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU5cbiAgfCB0eXBlb2YgU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVRcbiAgfCB0eXBlb2YgU3RhdGVzLkVSUk9SO1xuXG4vKlxuICogUXVpY2sgbG9va3VwIG1hcCBmb3Igc3RhdGVzIHRoYXQgYXJlIGNvbnNpZGVyZWQgdG8gYmUgXCJhY3RpdmVcIlxuICovXG5cbmNvbnN0IGJhc2VTdGF0ZXNDb25kaXRpb25zID0ge1xuICBOT1RfUkVTUE9OREVSOiBmYWxzZSxcbiAgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOOiBmYWxzZSxcbiAgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVDogZmFsc2UsXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU46IGZhbHNlLFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVDogZmFsc2UsXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTjogZmFsc2UsXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVQ6IGZhbHNlLFxuICBFUlJPUjogZmFsc2UsXG59O1xuXG5jb25zdCBJc0FjdGl2ZSA9IHtcbiAgLi4uYmFzZVN0YXRlc0NvbmRpdGlvbnMsXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUOiB0cnVlLFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOOiB0cnVlLFxufTtcblxuLyoqXG4gKiBRdWljayBsb29rdXAgZm9yIHN0YXRlcyB0aGF0IGFyZSBjb25zaWRlcmVkIHRvIGJlIFwicHJlc3NpbmdcIiBhbmQgYXJlXG4gKiB0aGVyZWZvcmUgZWxpZ2libGUgdG8gcmVzdWx0IGluIGEgXCJzZWxlY3Rpb25cIiBpZiB0aGUgcHJlc3Mgc3RvcHMuXG4gKi9cbmNvbnN0IElzUHJlc3NpbmdJbiA9IHtcbiAgLi4uYmFzZVN0YXRlc0NvbmRpdGlvbnMsXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTjogdHJ1ZSxcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTjogdHJ1ZSxcbiAgUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOOiB0cnVlLFxufTtcblxuY29uc3QgSXNMb25nUHJlc3NpbmdJbiA9IHtcbiAgLi4uYmFzZVN0YXRlc0NvbmRpdGlvbnMsXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTjogdHJ1ZSxcbn07XG5cbi8qKlxuICogSW5wdXRzIHRvIHRoZSBzdGF0ZSBtYWNoaW5lLlxuICovXG5jb25zdCBTaWduYWxzID0ga2V5TWlycm9yKHtcbiAgREVMQVk6IG51bGwsXG4gIFJFU1BPTkRFUl9HUkFOVDogbnVsbCxcbiAgUkVTUE9OREVSX1JFTEVBU0U6IG51bGwsXG4gIFJFU1BPTkRFUl9URVJNSU5BVEVEOiBudWxsLFxuICBFTlRFUl9QUkVTU19SRUNUOiBudWxsLFxuICBMRUFWRV9QUkVTU19SRUNUOiBudWxsLFxuICBMT05HX1BSRVNTX0RFVEVDVEVEOiBudWxsLFxufSk7XG5cbnR5cGUgU2lnbmFsID1cbiAgfCB0eXBlb2YgU2lnbmFscy5ERUxBWVxuICB8IHR5cGVvZiBTaWduYWxzLlJFU1BPTkRFUl9HUkFOVFxuICB8IHR5cGVvZiBTaWduYWxzLlJFU1BPTkRFUl9SRUxFQVNFXG4gIHwgdHlwZW9mIFNpZ25hbHMuUkVTUE9OREVSX1RFUk1JTkFURURcbiAgfCB0eXBlb2YgU2lnbmFscy5FTlRFUl9QUkVTU19SRUNUXG4gIHwgdHlwZW9mIFNpZ25hbHMuTEVBVkVfUFJFU1NfUkVDVFxuICB8IHR5cGVvZiBTaWduYWxzLkxPTkdfUFJFU1NfREVURUNURUQ7XG5cbi8qKlxuICogTWFwcGluZyBmcm9tIFN0YXRlcyB4IFNpZ25hbHMgPT4gU3RhdGVzXG4gKi9cbmNvbnN0IFRyYW5zaXRpb25zID0ge1xuICBOT1RfUkVTUE9OREVSOiB7XG4gICAgREVMQVk6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfR1JBTlQ6IFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU4sXG4gICAgUkVTUE9OREVSX1JFTEVBU0U6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLkVSUk9SLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5FUlJPUixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuRVJST1IsXG4gICAgTE9OR19QUkVTU19ERVRFQ1RFRDogU3RhdGVzLkVSUk9SLFxuICB9LFxuICBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU46IHtcbiAgICBERUxBWTogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU4sXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1JFTEVBU0U6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9URVJNSU5BVEVEOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VULFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5FUlJPUixcbiAgfSxcbiAgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVDoge1xuICAgIERFTEFZOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9QUkVTU19PVVQsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1JFTEVBU0U6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9URVJNSU5BVEVEOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VULFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5FUlJPUixcbiAgfSxcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTjoge1xuICAgIERFTEFZOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1JFTEVBU0U6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9URVJNSU5BVEVEOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9QUkVTU19PVVQsXG4gICAgTE9OR19QUkVTU19ERVRFQ1RFRDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTixcbiAgfSxcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19PVVQ6IHtcbiAgICBERUxBWTogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU4sXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VULFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5FUlJPUixcbiAgfSxcbiAgUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOOiB7XG4gICAgREVMQVk6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfR1JBTlQ6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU4sXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVQsXG4gICAgTE9OR19QUkVTU19ERVRFQ1RFRDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTixcbiAgfSxcbiAgUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVDoge1xuICAgIERFTEFZOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1JFTEVBU0U6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9URVJNSU5BVEVEOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfT1VULFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5FUlJPUixcbiAgfSxcbiAgZXJyb3I6IHtcbiAgICBERUxBWTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgTE9OR19QUkVTU19ERVRFQ1RFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gIH0sXG59O1xuXG4vLyA9PT09IFR5cGljYWwgQ29uc3RhbnRzIGZvciBpbnRlZ3JhdGluZyBpbnRvIFVJIGNvbXBvbmVudHMgPT09PVxuLy8gdmFyIEhJVF9FWFBBTkRfUFggPSAyMDtcbi8vIHZhciBISVRfVkVSVF9PRkZTRVRfUFggPSAxMDtcbmNvbnN0IEhJR0hMSUdIVF9ERUxBWV9NUyA9IDEzMDtcblxuY29uc3QgUFJFU1NfRVhQQU5EX1BYID0gMjA7XG5cbmNvbnN0IExPTkdfUFJFU1NfVEhSRVNIT0xEID0gNTAwO1xuXG5jb25zdCBMT05HX1BSRVNTX0RFTEFZX01TID0gTE9OR19QUkVTU19USFJFU0hPTEQgLSBISUdITElHSFRfREVMQVlfTVM7XG5cbmNvbnN0IExPTkdfUFJFU1NfQUxMT1dFRF9NT1ZFTUVOVCA9IDEwO1xuXG4vLyBEZWZhdWx0IGFtb3VudCBcImFjdGl2ZVwiIHJlZ2lvbiBwcm90cnVkZXMgYmV5b25kIGJveFxuXG4vKipcbiAqIEJ5IGNvbnZlbnRpb24sIG1ldGhvZHMgcHJlZml4ZWQgd2l0aCB1bmRlcnNjb3JlcyBhcmUgbWVhbnQgdG8gYmUgQHByaXZhdGUsXG4gKiBhbmQgbm90IEBwcm90ZWN0ZWQuIE1peGVycyBzaG91bGRuJ3QgYWNjZXNzIHRoZW0gLSBub3QgZXZlbiB0byBwcm92aWRlIHRoZW1cbiAqIGFzIGNhbGxiYWNrIGhhbmRsZXJzLlxuICpcbiAqXG4gKiA9PT09PT09PT09IEdlb21ldHJ5ID09PT09PT09PVxuICogYFRvdWNoYWJsZWAgb25seSBhc3N1bWVzIHRoYXQgdGhlcmUgZXhpc3RzIGEgYEhpdFJlY3RgIG5vZGUuIFRoZSBgUHJlc3NSZWN0YFxuICogaXMgYW4gYWJzdHJhY3QgYm94IHRoYXQgaXMgZXh0ZW5kZWQgYmV5b25kIHRoZSBgSGl0UmVjdGAuXG4gKlxuICogICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAqICB8ICAgICAgICAgICAgICAgICAgICAgICAgICB8IC0gXCJTdGFydFwiIGV2ZW50cyBpbiBgSGl0UmVjdGAgY2F1c2UgYEhpdFJlY3RgXG4gKiAgfCAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgfCAgIHRvIGJlY29tZSB0aGUgcmVzcG9uZGVyLlxuICogIHwgIHwgICstLS0tLS0tLS0tLS0tLSsgIHwgIHwgLSBgSGl0UmVjdGAgaXMgdHlwaWNhbGx5IGV4cGFuZGVkIGFyb3VuZFxuICogIHwgIHwgIHwgICAgICAgICAgICAgIHwgIHwgIHwgICB0aGUgYFZpc3VhbFJlY3RgLCBidXQgc2hpZnRlZCBkb3dud2FyZC5cbiAqICB8ICB8ICB8ICBWaXN1YWxSZWN0ICB8ICB8ICB8IC0gQWZ0ZXIgcHJlc3NpbmcgZG93biwgYWZ0ZXIgc29tZSBkZWxheSxcbiAqICB8ICB8ICB8ICAgICAgICAgICAgICB8ICB8ICB8ICAgYW5kIGJlZm9yZSBsZXR0aW5nIHVwLCB0aGUgVmlzdWFsIFJlYWN0XG4gKiAgfCAgfCAgKy0tLS0tLS0tLS0tLS0tKyAgfCAgfCAgIHdpbGwgYmVjb21lIFwiYWN0aXZlXCIuIFRoaXMgbWFrZXMgaXQgZWxpZ2libGVcbiAqICB8ICB8ICAgICBIaXRSZWN0ICAgICAgICB8ICB8ICAgZm9yIGJlaW5nIGhpZ2hsaWdodGVkIChzbyBsb25nIGFzIHRoZVxuICogIHwgICstLS0tLS0tLS0tLS0tLS0tLS0tLSsgIHwgICBwcmVzcyByZW1haW5zIGluIHRoZSBgUHJlc3NSZWN0YCkuXG4gKiAgfCAgICAgICAgUHJlc3NSZWN0ICAgICBvICAgfFxuICogICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLStcbiAqICAgICAgICAgICBPdXQgUmVnaW9uICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICstLS0tLSsgVGhpcyBnYXAgYmV0d2VlbiB0aGUgYEhpdFJlY3RgIGFuZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgUHJlc3NSZWN0YCBhbGxvd3MgYSB0b3VjaCB0byBtb3ZlIGZhciBhd2F5XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gdGhlIG9yaWdpbmFsIGhpdCByZWN0LCBhbmQgcmVtYWluXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkLCBhbmQgZWxpZ2libGUgZm9yIGEgXCJQcmVzc1wiLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDdXN0b21pemUgdGhpcyB2aWFcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYHRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCgpYC5cbiAqXG4gKlxuICpcbiAqID09PT09PT0gU3RhdGUgTWFjaGluZSA9PT09PT09XG4gKlxuICogKy0tLS0tLS0tLS0tLS0rIDwtLS0rIFJFU1BPTkRFUl9SRUxFQVNFXG4gKiB8Tk9UX1JFU1BPTkRFUnxcbiAqICstLS0tLS0tLS0tLS0tKyA8LS0tKyBSRVNQT05ERVJfVEVSTUlOQVRFRFxuICogICAgICtcbiAqICAgICB8IFJFU1BPTkRFUl9HUkFOVCAoSGl0UmVjdClcbiAqICAgICB2XG4gKiArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgREVMQVkgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgIFQgKyBERUxBWSAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAqIHxSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU58Ky0tLS0tLS0tPnxSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOfCArLS0tLS0tLS0tLS0tPiB8UkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOfFxuICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKiAgICAgKyAgICAgICAgICAgIF4gICAgICAgICAgICAgICAgICAgICAgICAgKyAgICAgICAgICAgXiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgICAgICAgICAgIF5cbiAqICAgICB8TEVBVkVfICAgICAgfEVOVEVSXyAgICAgICAgICAgICAgICAgICB8TEVBVkVfICAgICB8RU5URVJfICAgICAgICAgICAgICAgICAgICAgICAgICAgfExFQVZFXyAgICAgfEVOVEVSX1xuICogICAgIHxQUkVTU19SRUNUICB8UFJFU1NfUkVDVCAgICAgICAgICAgICAgIHxQUkVTU19SRUNUIHxQUkVTU19SRUNUICAgICAgICAgICAgICAgICAgICAgICB8UFJFU1NfUkVDVCB8UFJFU1NfUkVDVFxuICogICAgIHwgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICB8XG4gKiAgICAgdiAgICAgICAgICAgICsgICAgICAgICAgICAgICAgICAgICAgICAgdiAgICAgICAgICAgKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgICAgICAgICAgICtcbiAqICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgREVMQVkgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAqIHxSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUfCstLS0tLS0tPnxSRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVHwgICAgICAgICAgICAgICB8UkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVHxcbiAqICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAqXG4gKiBUICsgREVMQVkgPT4gTE9OR19QUkVTU19ERUxBWV9NUyArIERFTEFZXG4gKlxuICogTm90IGRyYXduIGFyZSB0aGUgc2lkZSBlZmZlY3RzIG9mIGVhY2ggdHJhbnNpdGlvbi4gVGhlIG1vc3QgaW1wb3J0YW50IHNpZGVcbiAqIGVmZmVjdCBpcyB0aGUgYHRvdWNoYWJsZUhhbmRsZVByZXNzYCBhYnN0cmFjdCBtZXRob2QgaW52b2NhdGlvbiB0aGF0IG9jY3Vyc1xuICogd2hlbiBhIHJlc3BvbmRlciBpcyByZWxlYXNlZCB3aGlsZSBpbiBlaXRoZXIgb2YgdGhlIFwiUHJlc3NcIiBzdGF0ZXMuXG4gKlxuICogVGhlIG90aGVyIGltcG9ydGFudCBzaWRlIGVmZmVjdHMgYXJlIHRoZSBoaWdobGlnaHQgYWJzdHJhY3QgbWV0aG9kXG4gKiBpbnZvY2F0aW9ucyAoaW50ZXJuYWwgY2FsbGJhY2tzKSB0byBiZSBpbXBsZW1lbnRlZCBieSB0aGUgbWl4ZXIuXG4gKlxuICpcbiAqIEBsZW5kcyBUb3VjaGFibGUucHJvdG90eXBlXG4gKi9cbmNvbnN0IFRvdWNoYWJsZU1peGluID0ge1xuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFQbGF0Zm9ybS5pc1RWKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fdHZFdmVudEhhbmRsZXIgPSBuZXcgVFZFdmVudEhhbmRsZXIoKTtcbiAgICB0aGlzLl90dkV2ZW50SGFuZGxlci5lbmFibGUodGhpcywgZnVuY3Rpb24oY21wLCBldnQpIHtcbiAgICAgIGNvbnN0IG15VGFnID0gUmVhY3ROYXRpdmUuZmluZE5vZGVIYW5kbGUoY21wKTtcbiAgICAgIGV2dC5kaXNwYXRjaENvbmZpZyA9IHt9O1xuICAgICAgaWYgKG15VGFnID09PSBldnQudGFnKSB7XG4gICAgICAgIGlmIChldnQuZXZlbnRUeXBlID09PSAnZm9jdXMnKSB7XG4gICAgICAgICAgY21wLnRvdWNoYWJsZUhhbmRsZUZvY3VzKGV2dCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZ0LmV2ZW50VHlwZSA9PT0gJ2JsdXInKSB7XG4gICAgICAgICAgY21wLnRvdWNoYWJsZUhhbmRsZUJsdXIoZXZ0KTtcbiAgICAgICAgfSBlbHNlIGlmIChldnQuZXZlbnRUeXBlID09PSAnc2VsZWN0JyAmJiBQbGF0Zm9ybS5PUyAhPT0gJ2FuZHJvaWQnKSB7XG4gICAgICAgICAgY21wLnRvdWNoYWJsZUhhbmRsZVByZXNzICYmXG4gICAgICAgICAgICAhY21wLnByb3BzLmRpc2FibGVkICYmXG4gICAgICAgICAgICBjbXAudG91Y2hhYmxlSGFuZGxlUHJlc3MoZXZ0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgdGltZW91dHMgb24gdW5tb3VudFxuICAgKi9cbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl90dkV2ZW50SGFuZGxlcikge1xuICAgICAgdGhpcy5fdHZFdmVudEhhbmRsZXIuZGlzYWJsZSgpO1xuICAgICAgZGVsZXRlIHRoaXMuX3R2RXZlbnRIYW5kbGVyO1xuICAgIH1cbiAgICB0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy50b3VjaGFibGVEZWxheVRpbWVvdXQpO1xuICAgIHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLmxvbmdQcmVzc0RlbGF5VGltZW91dCk7XG4gICAgdGhpcy5wcmVzc091dERlbGF5VGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy5wcmVzc091dERlbGF5VGltZW91dCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEl0J3MgcHJlZmVyIHRoYXQgbWl4aW5zIGRldGVybWluZSBzdGF0ZSBpbiB0aGlzIHdheSwgaGF2aW5nIHRoZSBjbGFzc1xuICAgKiBleHBsaWNpdGx5IG1peCB0aGUgc3RhdGUgaW4gdGhlIG9uZSBhbmQgb25seSBgZ2V0SW5pdGlhbFN0YXRlYCBtZXRob2QuXG4gICAqXG4gICAqIEByZXR1cm4ge29iamVjdH0gU3RhdGUgb2JqZWN0IHRvIGJlIHBsYWNlZCBpbnNpZGUgb2ZcbiAgICogYHRoaXMuc3RhdGUudG91Y2hhYmxlYC5cbiAgICovXG4gIHRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKTogJFRFTVBPUkFSWSRvYmplY3Q8e3xcbiAgICB0b3VjaGFibGU6ICRURU1QT1JBUlkkb2JqZWN0PHt8cmVzcG9uZGVySUQ6IG51bGwsIHRvdWNoU3RhdGU6IHZvaWR8fT4sXG4gIHx9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdWNoYWJsZToge3RvdWNoU3RhdGU6IHVuZGVmaW5lZCwgcmVzcG9uZGVySUQ6IG51bGx9LFxuICAgIH07XG4gIH0sXG5cbiAgLy8gPT09PSBIb29rcyB0byBHZXN0dXJlIFJlc3BvbmRlciBzeXN0ZW0gPT09PVxuICAvKipcbiAgICogTXVzdCByZXR1cm4gdHJ1ZSBpZiBlbWJlZGRlZCBpbiBhIG5hdGl2ZSBwbGF0Zm9ybSBzY3JvbGwgdmlldy5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdDogZnVuY3Rpb24oKTogYW55IHtcbiAgICByZXR1cm4gIXRoaXMucHJvcHMucmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb247XG4gIH0sXG5cbiAgLyoqXG4gICAqIE11c3QgcmV0dXJuIHRydWUgdG8gc3RhcnQgdGhlIHByb2Nlc3Mgb2YgYFRvdWNoYWJsZWAuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlcjogZnVuY3Rpb24oKTogYW55IHtcbiAgICByZXR1cm4gIXRoaXMucHJvcHMuZGlzYWJsZWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybiB0cnVlIHRvIGNhbmNlbCBwcmVzcyBvbiBsb25nIHByZXNzLlxuICAgKi9cbiAgdG91Y2hhYmxlTG9uZ1ByZXNzQ2FuY2Vsc1ByZXNzOiBmdW5jdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICAvKipcbiAgICogUGxhY2UgYXMgY2FsbGJhY2sgZm9yIGEgRE9NIGVsZW1lbnQncyBgb25SZXNwb25kZXJHcmFudGAgZXZlbnQuXG4gICAqIEBwYXJhbSB7U3ludGhldGljRXZlbnR9IGUgU3ludGhldGljIGV2ZW50IGZyb20gZXZlbnQgc3lzdGVtLlxuICAgKlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQ6IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICBjb25zdCBkaXNwYXRjaElEID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIC8vIFNpbmNlIGUgaXMgdXNlZCBpbiBhIGNhbGxiYWNrIGludm9rZWQgb24gYW5vdGhlciBldmVudCBsb29wXG4gICAgLy8gKGFzIGluIHNldFRpbWVvdXQgZXRjKSwgd2UgbmVlZCB0byBjYWxsIGUucGVyc2lzdCgpIG9uIHRoZVxuICAgIC8vIGV2ZW50IHRvIG1ha2Ugc3VyZSBpdCBkb2Vzbid0IGdldCByZXVzZWQgaW4gdGhlIGV2ZW50IG9iamVjdCBwb29sLlxuICAgIGUucGVyc2lzdCgpO1xuXG4gICAgdGhpcy5wcmVzc091dERlbGF5VGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy5wcmVzc091dERlbGF5VGltZW91dCk7XG4gICAgdGhpcy5wcmVzc091dERlbGF5VGltZW91dCA9IG51bGw7XG5cbiAgICB0aGlzLnN0YXRlLnRvdWNoYWJsZS50b3VjaFN0YXRlID0gU3RhdGVzLk5PVF9SRVNQT05ERVI7XG4gICAgdGhpcy5zdGF0ZS50b3VjaGFibGUucmVzcG9uZGVySUQgPSBkaXNwYXRjaElEO1xuICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5SRVNQT05ERVJfR1JBTlQsIGUpO1xuICAgIGxldCBkZWxheU1TID1cbiAgICAgIHRoaXMudG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUyAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gTWF0aC5tYXgodGhpcy50b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TKCksIDApXG4gICAgICAgIDogSElHSExJR0hUX0RFTEFZX01TO1xuICAgIGRlbGF5TVMgPSBpc05hTihkZWxheU1TKSA/IEhJR0hMSUdIVF9ERUxBWV9NUyA6IGRlbGF5TVM7XG4gICAgaWYgKGRlbGF5TVMgIT09IDApIHtcbiAgICAgIHRoaXMudG91Y2hhYmxlRGVsYXlUaW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsYXkuYmluZCh0aGlzLCBlKSxcbiAgICAgICAgZGVsYXlNUyxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGF5KGUpO1xuICAgIH1cblxuICAgIGxldCBsb25nRGVsYXlNUyA9XG4gICAgICB0aGlzLnRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVMgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IE1hdGgubWF4KHRoaXMudG91Y2hhYmxlR2V0TG9uZ1ByZXNzRGVsYXlNUygpLCAxMClcbiAgICAgICAgOiBMT05HX1BSRVNTX0RFTEFZX01TO1xuICAgIGxvbmdEZWxheU1TID0gaXNOYU4obG9uZ0RlbGF5TVMpID8gTE9OR19QUkVTU19ERUxBWV9NUyA6IGxvbmdEZWxheU1TO1xuICAgIHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgIHRoaXMuX2hhbmRsZUxvbmdEZWxheS5iaW5kKHRoaXMsIGUpLFxuICAgICAgbG9uZ0RlbGF5TVMgKyBkZWxheU1TLFxuICAgICk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBsYWNlIGFzIGNhbGxiYWNrIGZvciBhIERPTSBlbGVtZW50J3MgYG9uUmVzcG9uZGVyUmVsZWFzZWAgZXZlbnQuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlOiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgdGhpcy5wcmVzc0luTG9jYXRpb24gPSBudWxsO1xuICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5SRVNQT05ERVJfUkVMRUFTRSwgZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBsYWNlIGFzIGNhbGxiYWNrIGZvciBhIERPTSBlbGVtZW50J3MgYG9uUmVzcG9uZGVyVGVybWluYXRlYCBldmVudC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZTogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMucHJlc3NJbkxvY2F0aW9uID0gbnVsbDtcbiAgICB0aGlzLl9yZWNlaXZlU2lnbmFsKFNpZ25hbHMuUkVTUE9OREVSX1RFUk1JTkFURUQsIGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQbGFjZSBhcyBjYWxsYmFjayBmb3IgYSBET00gZWxlbWVudCdzIGBvblJlc3BvbmRlck1vdmVgIGV2ZW50LlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZTogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIC8vIE1lYXN1cmVtZW50IG1heSBub3QgaGF2ZSByZXR1cm5lZCB5ZXQuXG4gICAgaWYgKCF0aGlzLnN0YXRlLnRvdWNoYWJsZS5wb3NpdGlvbk9uQWN0aXZhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwb3NpdGlvbk9uQWN0aXZhdGUgPSB0aGlzLnN0YXRlLnRvdWNoYWJsZS5wb3NpdGlvbk9uQWN0aXZhdGU7XG4gICAgY29uc3QgZGltZW5zaW9uc09uQWN0aXZhdGUgPSB0aGlzLnN0YXRlLnRvdWNoYWJsZS5kaW1lbnNpb25zT25BY3RpdmF0ZTtcbiAgICBjb25zdCBwcmVzc1JlY3RPZmZzZXQgPSB0aGlzLnRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldFxuICAgICAgPyB0aGlzLnRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCgpXG4gICAgICA6IHtcbiAgICAgICAgICBsZWZ0OiBQUkVTU19FWFBBTkRfUFgsXG4gICAgICAgICAgcmlnaHQ6IFBSRVNTX0VYUEFORF9QWCxcbiAgICAgICAgICB0b3A6IFBSRVNTX0VYUEFORF9QWCxcbiAgICAgICAgICBib3R0b206IFBSRVNTX0VYUEFORF9QWCxcbiAgICAgICAgfTtcblxuICAgIGxldCBwcmVzc0V4cGFuZExlZnQgPSBwcmVzc1JlY3RPZmZzZXQubGVmdDtcbiAgICBsZXQgcHJlc3NFeHBhbmRUb3AgPSBwcmVzc1JlY3RPZmZzZXQudG9wO1xuICAgIGxldCBwcmVzc0V4cGFuZFJpZ2h0ID0gcHJlc3NSZWN0T2Zmc2V0LnJpZ2h0O1xuICAgIGxldCBwcmVzc0V4cGFuZEJvdHRvbSA9IHByZXNzUmVjdE9mZnNldC5ib3R0b207XG5cbiAgICBjb25zdCBoaXRTbG9wID0gdGhpcy50b3VjaGFibGVHZXRIaXRTbG9wXG4gICAgICA/IHRoaXMudG91Y2hhYmxlR2V0SGl0U2xvcCgpXG4gICAgICA6IG51bGw7XG5cbiAgICBpZiAoaGl0U2xvcCkge1xuICAgICAgcHJlc3NFeHBhbmRMZWZ0ICs9IGhpdFNsb3AubGVmdCB8fCAwO1xuICAgICAgcHJlc3NFeHBhbmRUb3AgKz0gaGl0U2xvcC50b3AgfHwgMDtcbiAgICAgIHByZXNzRXhwYW5kUmlnaHQgKz0gaGl0U2xvcC5yaWdodCB8fCAwO1xuICAgICAgcHJlc3NFeHBhbmRCb3R0b20gKz0gaGl0U2xvcC5ib3R0b20gfHwgMDtcbiAgICB9XG5cbiAgICBjb25zdCB0b3VjaCA9IGV4dHJhY3RTaW5nbGVUb3VjaChlLm5hdGl2ZUV2ZW50KTtcbiAgICBjb25zdCBwYWdlWCA9IHRvdWNoICYmIHRvdWNoLnBhZ2VYO1xuICAgIGNvbnN0IHBhZ2VZID0gdG91Y2ggJiYgdG91Y2gucGFnZVk7XG5cbiAgICBpZiAodGhpcy5wcmVzc0luTG9jYXRpb24pIHtcbiAgICAgIGNvbnN0IG1vdmVkRGlzdGFuY2UgPSB0aGlzLl9nZXREaXN0YW5jZUJldHdlZW5Qb2ludHMoXG4gICAgICAgIHBhZ2VYLFxuICAgICAgICBwYWdlWSxcbiAgICAgICAgdGhpcy5wcmVzc0luTG9jYXRpb24ucGFnZVgsXG4gICAgICAgIHRoaXMucHJlc3NJbkxvY2F0aW9uLnBhZ2VZLFxuICAgICAgKTtcbiAgICAgIGlmIChtb3ZlZERpc3RhbmNlID4gTE9OR19QUkVTU19BTExPV0VEX01PVkVNRU5UKSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGlzVG91Y2hXaXRoaW5BY3RpdmUgPVxuICAgICAgcGFnZVggPiBwb3NpdGlvbk9uQWN0aXZhdGUubGVmdCAtIHByZXNzRXhwYW5kTGVmdCAmJlxuICAgICAgcGFnZVkgPiBwb3NpdGlvbk9uQWN0aXZhdGUudG9wIC0gcHJlc3NFeHBhbmRUb3AgJiZcbiAgICAgIHBhZ2VYIDxcbiAgICAgICAgcG9zaXRpb25PbkFjdGl2YXRlLmxlZnQgK1xuICAgICAgICAgIGRpbWVuc2lvbnNPbkFjdGl2YXRlLndpZHRoICtcbiAgICAgICAgICBwcmVzc0V4cGFuZFJpZ2h0ICYmXG4gICAgICBwYWdlWSA8XG4gICAgICAgIHBvc2l0aW9uT25BY3RpdmF0ZS50b3AgK1xuICAgICAgICAgIGRpbWVuc2lvbnNPbkFjdGl2YXRlLmhlaWdodCArXG4gICAgICAgICAgcHJlc3NFeHBhbmRCb3R0b207XG4gICAgaWYgKGlzVG91Y2hXaXRoaW5BY3RpdmUpIHtcbiAgICAgIGNvbnN0IHByZXZTdGF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnRvdWNoU3RhdGU7XG4gICAgICB0aGlzLl9yZWNlaXZlU2lnbmFsKFNpZ25hbHMuRU5URVJfUFJFU1NfUkVDVCwgZSk7XG4gICAgICBjb25zdCBjdXJTdGF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnRvdWNoU3RhdGU7XG4gICAgICBpZiAoXG4gICAgICAgIGN1clN0YXRlID09PSBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOICYmXG4gICAgICAgIHByZXZTdGF0ZSAhPT0gU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTlxuICAgICAgKSB7XG4gICAgICAgIC8vIGZpeCBmb3IgdDc5Njc0MjBcbiAgICAgICAgdGhpcy5fY2FuY2VsTG9uZ1ByZXNzRGVsYXlUaW1lb3V0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dCgpO1xuICAgICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLkxFQVZFX1BSRVNTX1JFQ1QsIGUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIHJlY2VpdmVzIGZvY3VzLiBNaXhlcnMgbWlnaHQgb3ZlcnJpZGUgdGhpcyB0b1xuICAgKiB2aXN1YWxseSBkaXN0aW5ndWlzaCB0aGUgYFZpc3VhbFJlY3RgIHNvIHRoYXQgdGhlIHVzZXIga25vd3MgdGhhdCBpdFxuICAgKiBjdXJyZW50bHkgaGFzIHRoZSBmb2N1cy4gTW9zdCBwbGF0Zm9ybXMgb25seSBzdXBwb3J0IGEgc2luZ2xlIGVsZW1lbnQgYmVpbmdcbiAgICogZm9jdXNlZCBhdCBhIHRpbWUsIGluIHdoaWNoIGNhc2UgdGhlcmUgbWF5IGhhdmUgYmVlbiBhIHByZXZpb3VzbHkgZm9jdXNlZFxuICAgKiBlbGVtZW50IHRoYXQgd2FzIGJsdXJyZWQganVzdCBwcmlvciB0byB0aGlzLiBUaGlzIGNhbiBiZSBvdmVycmlkZGVuIHdoZW5cbiAgICogdXNpbmcgYFRvdWNoYWJsZS5NaXhpbi53aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1cmAuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVGb2N1czogZnVuY3Rpb24oZTogRXZlbnQpIHtcbiAgICB0aGlzLnByb3BzLm9uRm9jdXMgJiYgdGhpcy5wcm9wcy5vbkZvY3VzKGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGl0ZW0gbG9zZXMgZm9jdXMuIE1peGVycyBtaWdodCBvdmVycmlkZSB0aGlzIHRvXG4gICAqIHZpc3VhbGx5IGRpc3Rpbmd1aXNoIHRoZSBgVmlzdWFsUmVjdGAgc28gdGhhdCB0aGUgdXNlciBrbm93cyB0aGF0IGl0XG4gICAqIG5vIGxvbmdlciBoYXMgZm9jdXMuIE1vc3QgcGxhdGZvcm1zIG9ubHkgc3VwcG9ydCBhIHNpbmdsZSBlbGVtZW50IGJlaW5nXG4gICAqIGZvY3VzZWQgYXQgYSB0aW1lLCBpbiB3aGljaCBjYXNlIHRoZSBmb2N1cyBtYXkgaGF2ZSBtb3ZlZCB0byBhbm90aGVyLlxuICAgKiBUaGlzIGNhbiBiZSBvdmVycmlkZGVuIHdoZW4gdXNpbmdcbiAgICogYFRvdWNoYWJsZS5NaXhpbi53aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1cmAuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVCbHVyOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25CbHVyICYmIHRoaXMucHJvcHMub25CbHVyKGUpO1xuICB9LFxuXG4gIC8vID09PT0gQWJzdHJhY3QgQXBwbGljYXRpb24gQ2FsbGJhY2tzID09PT1cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIHNob3VsZCBiZSBoaWdobGlnaHRlZC4gTWl4ZXJzIHNob3VsZCBpbXBsZW1lbnQgdGhpc1xuICAgKiB0byB2aXN1YWxseSBkaXN0aW5ndWlzaCB0aGUgYFZpc3VhbFJlY3RgIHNvIHRoYXQgdGhlIHVzZXIga25vd3MgdGhhdFxuICAgKiByZWxlYXNpbmcgYSB0b3VjaCB3aWxsIHJlc3VsdCBpbiBhIFwic2VsZWN0aW9uXCIgKGFuYWxvZyB0byBjbGljaykuXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKiB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luOiBmdW5jdGlvbixcbiAgICovXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgaXRlbSBpcyBcImFjdGl2ZVwiIChpbiB0aGF0IGl0IGlzIHN0aWxsIGVsaWdpYmxlIHRvIGJlY29tZVxuICAgKiBhIFwic2VsZWN0XCIpIGJ1dCB0aGUgdG91Y2ggaGFzIGxlZnQgdGhlIGBQcmVzc1JlY3RgLiBVc3VhbGx5IHRoZSBtaXhlciB3aWxsXG4gICAqIHdhbnQgdG8gdW5oaWdobGlnaHQgdGhlIGBWaXN1YWxSZWN0YC4gSWYgdGhlIHVzZXIgKHdoaWxlIHByZXNzaW5nKSBtb3Zlc1xuICAgKiBiYWNrIGludG8gdGhlIGBQcmVzc1JlY3RgIGB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luYCB3aWxsIGJlIGludm9rZWRcbiAgICogYWdhaW4gYW5kIHRoZSBtaXhlciBzaG91bGQgcHJvYmFibHkgaGlnaGxpZ2h0IHRoZSBgVmlzdWFsUmVjdGAgYWdhaW4uIFRoaXNcbiAgICogZXZlbnQgd2lsbCBub3QgZmlyZSBvbiBhbiBgdG91Y2hFbmQvbW91c2VVcGAgZXZlbnQsIG9ubHkgbW92ZSBldmVudHMgd2hpbGVcbiAgICogdGhlIHVzZXIgaXMgZGVwcmVzc2luZyB0aGUgbW91c2UvdG91Y2guXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKiB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dDogZnVuY3Rpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgaXRlbSBpcyBcInNlbGVjdGVkXCIgLSBtZWFuaW5nIHRoZSBpbnRlcmFjdGlvbiBlbmRlZCBieVxuICAgKiBsZXR0aW5nIHVwIHdoaWxlIHRoZSBpdGVtIHdhcyBlaXRoZXIgaW4gdGhlIHN0YXRlXG4gICAqIGBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOYCBvciBgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOYC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUhhbmRsZVByZXNzOiBmdW5jdGlvblxuICAgKi9cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIGlzIGxvbmcgcHJlc3NlZCAtIG1lYW5pbmcgdGhlIGludGVyYWN0aW9uIGVuZGVkIGJ5XG4gICAqIGxldHRpbmcgdXAgd2hpbGUgdGhlIGl0ZW0gd2FzIGluIGBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU5gLiBJZlxuICAgKiBgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzYCBpcyAqbm90KiBwcm92aWRlZCwgYHRvdWNoYWJsZUhhbmRsZVByZXNzYCB3aWxsXG4gICAqIGJlIGNhbGxlZCBhcyBpdCBub3JtYWxseSBpcy4gSWYgYHRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzc2AgaXMgcHJvdmlkZWQsIGJ5XG4gICAqIGRlZmF1bHQgYW55IGB0b3VjaGFibGVIYW5kbGVQcmVzc2AgY2FsbGJhY2sgd2lsbCBub3QgYmUgaW52b2tlZC4gVG9cbiAgICogb3ZlcnJpZGUgdGhpcyBkZWZhdWx0IGJlaGF2aW9yLCBvdmVycmlkZSBgdG91Y2hhYmxlTG9uZ1ByZXNzQ2FuY2Vsc1ByZXNzYFxuICAgKiB0byByZXR1cm4gZmFsc2UuIEFzIGEgcmVzdWx0LCBgdG91Y2hhYmxlSGFuZGxlUHJlc3NgIHdpbGwgYmUgY2FsbGVkIHdoZW5cbiAgICogbGlmdGluZyB1cCwgZXZlbiBpZiBgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzYCBoYXMgYWxzbyBiZWVuIGNhbGxlZC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzczogZnVuY3Rpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBtaWxsaXMgdG8gd2FpdCBiZWZvcmUgdHJpZ2dlcmluZyBhIGhpZ2hsaWdodC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVM6IGZ1bmN0aW9uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhbW91bnQgdG8gZXh0ZW5kIHRoZSBgSGl0UmVjdGAgaW50byB0aGUgYFByZXNzUmVjdGAuIFBvc2l0aXZlXG4gICAqIG51bWJlcnMgbWVhbiB0aGUgc2l6ZSBleHBhbmRzIG91dHdhcmRzLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICogdG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0OiBmdW5jdGlvblxuICAgKi9cblxuICAvLyA9PT09IEludGVybmFsIExvZ2ljID09PT1cblxuICAvKipcbiAgICogTWVhc3VyZXMgdGhlIGBIaXRSZWN0YCBub2RlIG9uIGFjdGl2YXRpb24uIFRoZSBCb3VuZGluZyByZWN0YW5nbGUgaXMgd2l0aFxuICAgKiByZXNwZWN0IHRvIHZpZXdwb3J0IC0gbm90IHBhZ2UsIHNvIGFkZGluZyB0aGUgYHBhZ2VYT2Zmc2V0L3BhZ2VZT2Zmc2V0YFxuICAgKiBzaG91bGQgcmVzdWx0IGluIHBvaW50cyB0aGF0IGFyZSBpbiB0aGUgc2FtZSBjb29yZGluYXRlIHN5c3RlbSBhcyBhblxuICAgKiBldmVudCdzIGBnbG9iYWxYL2dsb2JhbFlgIGRhdGEgdmFsdWVzLlxuICAgKlxuICAgKiAtIENvbnNpZGVyIGNhY2hpbmcgdGhpcyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBjb21wb25lbnQsIG9yIHBvc3NpYmx5XG4gICAqICAgYmVpbmcgYWJsZSB0byBzaGFyZSB0aGlzIGNhY2hlIGJldHdlZW4gYW55IGBTY3JvbGxNYXBgIHZpZXcuXG4gICAqXG4gICAqIEBzaWRlZWZmZWN0c1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbWVhc3VyZU1ldHJpY3NPbkFjdGl2YXRpb246IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHJlc3BvbmRlcklEID0gdGhpcy5zdGF0ZS50b3VjaGFibGUucmVzcG9uZGVySUQ7XG4gICAgaWYgKHJlc3BvbmRlcklEID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlc3BvbmRlcklEID09PSAnbnVtYmVyJykge1xuICAgICAgVUlNYW5hZ2VyLm1lYXN1cmUocmVzcG9uZGVySUQsIHRoaXMuX2hhbmRsZVF1ZXJ5TGF5b3V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzcG9uZGVySUQubWVhc3VyZSh0aGlzLl9oYW5kbGVRdWVyeUxheW91dCk7XG4gICAgfVxuICB9LFxuXG4gIF9oYW5kbGVRdWVyeUxheW91dDogZnVuY3Rpb24oXG4gICAgbDogbnVtYmVyLFxuICAgIHQ6IG51bWJlcixcbiAgICB3OiBudW1iZXIsXG4gICAgaDogbnVtYmVyLFxuICAgIGdsb2JhbFg6IG51bWJlcixcbiAgICBnbG9iYWxZOiBudW1iZXIsXG4gICkge1xuICAgIC8vZG9uJ3QgZG8gYW55dGhpbmcgVUlNYW5hZ2VyIGZhaWxlZCB0byBtZWFzdXJlIG5vZGVcbiAgICBpZiAoIWwgJiYgIXQgJiYgIXcgJiYgIWggJiYgIWdsb2JhbFggJiYgIWdsb2JhbFkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS50b3VjaGFibGUucG9zaXRpb25PbkFjdGl2YXRlICYmXG4gICAgICBQb3NpdGlvbi5yZWxlYXNlKHRoaXMuc3RhdGUudG91Y2hhYmxlLnBvc2l0aW9uT25BY3RpdmF0ZSk7XG4gICAgdGhpcy5zdGF0ZS50b3VjaGFibGUuZGltZW5zaW9uc09uQWN0aXZhdGUgJiZcbiAgICAgIEJvdW5kaW5nRGltZW5zaW9ucy5yZWxlYXNlKHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlKTtcbiAgICB0aGlzLnN0YXRlLnRvdWNoYWJsZS5wb3NpdGlvbk9uQWN0aXZhdGUgPSBQb3NpdGlvbi5nZXRQb29sZWQoXG4gICAgICBnbG9iYWxYLFxuICAgICAgZ2xvYmFsWSxcbiAgICApO1xuICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlID0gQm91bmRpbmdEaW1lbnNpb25zLmdldFBvb2xlZChcbiAgICAgIHcsXG4gICAgICBoLFxuICAgICk7XG4gIH0sXG5cbiAgX2hhbmRsZURlbGF5OiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgdGhpcy50b3VjaGFibGVEZWxheVRpbWVvdXQgPSBudWxsO1xuICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5ERUxBWSwgZSk7XG4gIH0sXG5cbiAgX2hhbmRsZUxvbmdEZWxheTogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0ID0gbnVsbDtcbiAgICBjb25zdCBjdXJTdGF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnRvdWNoU3RhdGU7XG4gICAgaWYgKFxuICAgICAgY3VyU3RhdGUgPT09IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOIHx8XG4gICAgICBjdXJTdGF0ZSA9PT0gU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTlxuICAgICkge1xuICAgICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLkxPTkdfUFJFU1NfREVURUNURUQsIGUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVjZWl2ZXMgYSBzdGF0ZSBtYWNoaW5lIHNpZ25hbCwgcGVyZm9ybXMgc2lkZSBlZmZlY3RzIG9mIHRoZSB0cmFuc2l0aW9uXG4gICAqIGFuZCBzdG9yZXMgdGhlIG5ldyBzdGF0ZS4gVmFsaWRhdGVzIHRoZSB0cmFuc2l0aW9uIGFzIHdlbGwuXG4gICAqXG4gICAqIEBwYXJhbSB7U2lnbmFsc30gc2lnbmFsIFN0YXRlIG1hY2hpbmUgc2lnbmFsLlxuICAgKiBAdGhyb3dzIEVycm9yIGlmIGludmFsaWQgc3RhdGUgdHJhbnNpdGlvbiBvciB1bnJlY29nbml6ZWQgc2lnbmFsLlxuICAgKiBAc2lkZWVmZmVjdHNcbiAgICovXG4gIF9yZWNlaXZlU2lnbmFsOiBmdW5jdGlvbihzaWduYWw6IFNpZ25hbCwgZTogUHJlc3NFdmVudCkge1xuICAgIGNvbnN0IHJlc3BvbmRlcklEID0gdGhpcy5zdGF0ZS50b3VjaGFibGUucmVzcG9uZGVySUQ7XG4gICAgY29uc3QgY3VyU3RhdGUgPSB0aGlzLnN0YXRlLnRvdWNoYWJsZS50b3VjaFN0YXRlO1xuICAgIGNvbnN0IG5leHRTdGF0ZSA9IFRyYW5zaXRpb25zW2N1clN0YXRlXSAmJiBUcmFuc2l0aW9uc1tjdXJTdGF0ZV1bc2lnbmFsXTtcbiAgICBpZiAoIXJlc3BvbmRlcklEICYmIHNpZ25hbCA9PT0gU2lnbmFscy5SRVNQT05ERVJfUkVMRUFTRSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIW5leHRTdGF0ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVW5yZWNvZ25pemVkIHNpZ25hbCBgJyArXG4gICAgICAgICAgc2lnbmFsICtcbiAgICAgICAgICAnYCBvciBzdGF0ZSBgJyArXG4gICAgICAgICAgY3VyU3RhdGUgK1xuICAgICAgICAgICdgIGZvciBUb3VjaGFibGUgcmVzcG9uZGVyIGAnICtcbiAgICAgICAgICB0eXBlb2YgdGhpcy5zdGF0ZS50b3VjaGFibGUucmVzcG9uZGVySUQgPT09XG4gICAgICAgICdudW1iZXInXG4gICAgICAgICAgPyB0aGlzLnN0YXRlLnRvdWNoYWJsZS5yZXNwb25kZXJJRFxuICAgICAgICAgIDogJ2hvc3QgY29tcG9uZW50JyArICdgJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChuZXh0U3RhdGUgPT09IFN0YXRlcy5FUlJPUikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVG91Y2hhYmxlIGNhbm5vdCB0cmFuc2l0aW9uIGZyb20gYCcgK1xuICAgICAgICAgIGN1clN0YXRlICtcbiAgICAgICAgICAnYCB0byBgJyArXG4gICAgICAgICAgc2lnbmFsICtcbiAgICAgICAgICAnYCBmb3IgcmVzcG9uZGVyIGAnICtcbiAgICAgICAgICB0eXBlb2YgdGhpcy5zdGF0ZS50b3VjaGFibGUucmVzcG9uZGVySUQgPT09XG4gICAgICAgICdudW1iZXInXG4gICAgICAgICAgPyB0aGlzLnN0YXRlLnRvdWNoYWJsZS5yZXNwb25kZXJJRFxuICAgICAgICAgIDogJzw8aG9zdCBjb21wb25lbnQ+PicgKyAnYCcsXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoY3VyU3RhdGUgIT09IG5leHRTdGF0ZSkge1xuICAgICAgdGhpcy5fcGVyZm9ybVNpZGVFZmZlY3RzRm9yVHJhbnNpdGlvbihjdXJTdGF0ZSwgbmV4dFN0YXRlLCBzaWduYWwsIGUpO1xuICAgICAgdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZSA9IG5leHRTdGF0ZTtcbiAgICB9XG4gIH0sXG5cbiAgX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0KTtcbiAgICB0aGlzLmxvbmdQcmVzc0RlbGF5VGltZW91dCA9IG51bGw7XG4gIH0sXG5cbiAgX2lzSGlnaGxpZ2h0OiBmdW5jdGlvbihzdGF0ZTogU3RhdGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgc3RhdGUgPT09IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOIHx8XG4gICAgICBzdGF0ZSA9PT0gU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTlxuICAgICk7XG4gIH0sXG5cbiAgX3NhdmVQcmVzc0luTG9jYXRpb246IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICBjb25zdCB0b3VjaCA9IGV4dHJhY3RTaW5nbGVUb3VjaChlLm5hdGl2ZUV2ZW50KTtcbiAgICBjb25zdCBwYWdlWCA9IHRvdWNoICYmIHRvdWNoLnBhZ2VYO1xuICAgIGNvbnN0IHBhZ2VZID0gdG91Y2ggJiYgdG91Y2gucGFnZVk7XG4gICAgY29uc3QgbG9jYXRpb25YID0gdG91Y2ggJiYgdG91Y2gubG9jYXRpb25YO1xuICAgIGNvbnN0IGxvY2F0aW9uWSA9IHRvdWNoICYmIHRvdWNoLmxvY2F0aW9uWTtcbiAgICB0aGlzLnByZXNzSW5Mb2NhdGlvbiA9IHtwYWdlWCwgcGFnZVksIGxvY2F0aW9uWCwgbG9jYXRpb25ZfTtcbiAgfSxcblxuICBfZ2V0RGlzdGFuY2VCZXR3ZWVuUG9pbnRzOiBmdW5jdGlvbihcbiAgICBhWDogbnVtYmVyLFxuICAgIGFZOiBudW1iZXIsXG4gICAgYlg6IG51bWJlcixcbiAgICBiWTogbnVtYmVyLFxuICApOiBudW1iZXIge1xuICAgIGNvbnN0IGRlbHRhWCA9IGFYIC0gYlg7XG4gICAgY29uc3QgZGVsdGFZID0gYVkgLSBiWTtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KGRlbHRhWCAqIGRlbHRhWCArIGRlbHRhWSAqIGRlbHRhWSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdpbGwgcGVyZm9ybSBhIHRyYW5zaXRpb24gYmV0d2VlbiB0b3VjaGFibGUgc3RhdGVzLCBhbmQgaWRlbnRpZnkgYW55XG4gICAqIGhpZ2hsaWdodGluZyBvciB1bmhpZ2hsaWdodGluZyB0aGF0IG11c3QgYmUgcGVyZm9ybWVkIGZvciB0aGlzIHBhcnRpY3VsYXJcbiAgICogdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtTdGF0ZXN9IGN1clN0YXRlIEN1cnJlbnQgVG91Y2hhYmxlIHN0YXRlLlxuICAgKiBAcGFyYW0ge1N0YXRlc30gbmV4dFN0YXRlIE5leHQgVG91Y2hhYmxlIHN0YXRlLlxuICAgKiBAcGFyYW0ge1NpZ25hbH0gc2lnbmFsIFNpZ25hbCB0aGF0IHRyaWdnZXJlZCB0aGUgdHJhbnNpdGlvbi5cbiAgICogQHBhcmFtIHtFdmVudH0gZSBOYXRpdmUgZXZlbnQuXG4gICAqIEBzaWRlZWZmZWN0c1xuICAgKi9cbiAgX3BlcmZvcm1TaWRlRWZmZWN0c0ZvclRyYW5zaXRpb246IGZ1bmN0aW9uKFxuICAgIGN1clN0YXRlOiBTdGF0ZSxcbiAgICBuZXh0U3RhdGU6IFN0YXRlLFxuICAgIHNpZ25hbDogU2lnbmFsLFxuICAgIGU6IFByZXNzRXZlbnQsXG4gICkge1xuICAgIGNvbnN0IGN1cklzSGlnaGxpZ2h0ID0gdGhpcy5faXNIaWdobGlnaHQoY3VyU3RhdGUpO1xuICAgIGNvbnN0IG5ld0lzSGlnaGxpZ2h0ID0gdGhpcy5faXNIaWdobGlnaHQobmV4dFN0YXRlKTtcblxuICAgIGNvbnN0IGlzRmluYWxTaWduYWwgPVxuICAgICAgc2lnbmFsID09PSBTaWduYWxzLlJFU1BPTkRFUl9URVJNSU5BVEVEIHx8XG4gICAgICBzaWduYWwgPT09IFNpZ25hbHMuUkVTUE9OREVSX1JFTEVBU0U7XG5cbiAgICBpZiAoaXNGaW5hbFNpZ25hbCkge1xuICAgICAgdGhpcy5fY2FuY2VsTG9uZ1ByZXNzRGVsYXlUaW1lb3V0KCk7XG4gICAgfVxuXG4gICAgY29uc3QgaXNJbml0aWFsVHJhbnNpdGlvbiA9XG4gICAgICBjdXJTdGF0ZSA9PT0gU3RhdGVzLk5PVF9SRVNQT05ERVIgJiZcbiAgICAgIG5leHRTdGF0ZSA9PT0gU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTjtcblxuICAgIGNvbnN0IGlzQWN0aXZlVHJhbnNpdGlvbiA9ICFJc0FjdGl2ZVtjdXJTdGF0ZV0gJiYgSXNBY3RpdmVbbmV4dFN0YXRlXTtcbiAgICBpZiAoaXNJbml0aWFsVHJhbnNpdGlvbiB8fCBpc0FjdGl2ZVRyYW5zaXRpb24pIHtcbiAgICAgIHRoaXMuX3JlbWVhc3VyZU1ldHJpY3NPbkFjdGl2YXRpb24oKTtcbiAgICB9XG5cbiAgICBpZiAoSXNQcmVzc2luZ0luW2N1clN0YXRlXSAmJiBzaWduYWwgPT09IFNpZ25hbHMuTE9OR19QUkVTU19ERVRFQ1RFRCkge1xuICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVMb25nUHJlc3MgJiYgdGhpcy50b3VjaGFibGVIYW5kbGVMb25nUHJlc3MoZSk7XG4gICAgfVxuXG4gICAgaWYgKG5ld0lzSGlnaGxpZ2h0ICYmICFjdXJJc0hpZ2hsaWdodCkge1xuICAgICAgdGhpcy5fc3RhcnRIaWdobGlnaHQoZSk7XG4gICAgfSBlbHNlIGlmICghbmV3SXNIaWdobGlnaHQgJiYgY3VySXNIaWdobGlnaHQpIHtcbiAgICAgIHRoaXMuX2VuZEhpZ2hsaWdodChlKTtcbiAgICB9XG5cbiAgICBpZiAoSXNQcmVzc2luZ0luW2N1clN0YXRlXSAmJiBzaWduYWwgPT09IFNpZ25hbHMuUkVTUE9OREVSX1JFTEVBU0UpIHtcbiAgICAgIGNvbnN0IGhhc0xvbmdQcmVzc0hhbmRsZXIgPSAhIXRoaXMucHJvcHMub25Mb25nUHJlc3M7XG4gICAgICBjb25zdCBwcmVzc0lzTG9uZ0J1dFN0aWxsQ2FsbE9uUHJlc3MgPVxuICAgICAgICBJc0xvbmdQcmVzc2luZ0luW2N1clN0YXRlXSAmJiAvLyBXZSAqYXJlKiBsb25nIHByZXNzaW5nLi4gLy8gQnV0IGVpdGhlciBoYXMgbm8gbG9uZyBoYW5kbGVyXG4gICAgICAgICghaGFzTG9uZ1ByZXNzSGFuZGxlciB8fCAhdGhpcy50b3VjaGFibGVMb25nUHJlc3NDYW5jZWxzUHJlc3MoKSk7IC8vIG9yIHdlJ3JlIHRvbGQgdG8gaWdub3JlIGl0LlxuXG4gICAgICBjb25zdCBzaG91bGRJbnZva2VQcmVzcyA9XG4gICAgICAgICFJc0xvbmdQcmVzc2luZ0luW2N1clN0YXRlXSB8fCBwcmVzc0lzTG9uZ0J1dFN0aWxsQ2FsbE9uUHJlc3M7XG4gICAgICBpZiAoc2hvdWxkSW52b2tlUHJlc3MgJiYgdGhpcy50b3VjaGFibGVIYW5kbGVQcmVzcykge1xuICAgICAgICBpZiAoIW5ld0lzSGlnaGxpZ2h0ICYmICFjdXJJc0hpZ2hsaWdodCkge1xuICAgICAgICAgIC8vIHdlIG5ldmVyIGhpZ2hsaWdodGVkIGJlY2F1c2Ugb2YgZGVsYXksIGJ1dCB3ZSBzaG91bGQgaGlnaGxpZ2h0IG5vd1xuICAgICAgICAgIHRoaXMuX3N0YXJ0SGlnaGxpZ2h0KGUpO1xuICAgICAgICAgIHRoaXMuX2VuZEhpZ2hsaWdodChlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJyAmJiAhdGhpcy5wcm9wcy50b3VjaFNvdW5kRGlzYWJsZWQpIHtcbiAgICAgICAgICBTb3VuZE1hbmFnZXIucGxheVRvdWNoU291bmQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZVByZXNzKGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudG91Y2hhYmxlRGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCk7XG4gICAgdGhpcy50b3VjaGFibGVEZWxheVRpbWVvdXQgPSBudWxsO1xuICB9LFxuXG4gIF9zdGFydEhpZ2hsaWdodDogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMuX3NhdmVQcmVzc0luTG9jYXRpb24oZSk7XG4gICAgdGhpcy50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luICYmIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbihlKTtcbiAgfSxcblxuICBfZW5kSGlnaGxpZ2h0OiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgaWYgKHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy50b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVMgJiZcbiAgICAgICAgdGhpcy50b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVMoKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0KGUpO1xuICAgICAgICB9LCB0aGlzLnRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUygpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQoZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHdpdGhvdXREZWZhdWx0Rm9jdXNBbmRCbHVyOiAoe306ICRURU1QT1JBUlkkb2JqZWN0PHt8fH0+KSxcbn07XG5cbi8qKlxuICogUHJvdmlkZSBhbiBvcHRpb25hbCB2ZXJzaW9uIG9mIHRoZSBtaXhpbiB3aGVyZSBgdG91Y2hhYmxlSGFuZGxlRm9jdXNgIGFuZFxuICogYHRvdWNoYWJsZUhhbmRsZUJsdXJgIGNhbiBiZSBvdmVycmlkZGVuLiBUaGlzIGFsbG93cyBhcHByb3ByaWF0ZSBkZWZhdWx0cyB0b1xuICogYmUgc2V0IG9uIFRWIHBsYXRmb3Jtcywgd2l0aG91dCBicmVha2luZyBleGlzdGluZyBpbXBsZW1lbnRhdGlvbnMgb2ZcbiAqIGBUb3VjaGFibGVgLlxuICovXG5jb25zdCB7XG4gIHRvdWNoYWJsZUhhbmRsZUZvY3VzLFxuICB0b3VjaGFibGVIYW5kbGVCbHVyLFxuICAuLi5Ub3VjaGFibGVNaXhpbldpdGhvdXREZWZhdWx0Rm9jdXNBbmRCbHVyXG59ID0gVG91Y2hhYmxlTWl4aW47XG5Ub3VjaGFibGVNaXhpbi53aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1ciA9IFRvdWNoYWJsZU1peGluV2l0aG91dERlZmF1bHRGb2N1c0FuZEJsdXI7XG5cbmNvbnN0IFRvdWNoYWJsZSA9IHtcbiAgTWl4aW46IFRvdWNoYWJsZU1peGluLFxuICBUT1VDSF9UQVJHRVRfREVCVUc6IGZhbHNlLCAvLyBIaWdobGlnaHRzIGFsbCB0b3VjaGFibGUgdGFyZ2V0cy4gVG9nZ2xlIHdpdGggSW5zcGVjdG9yLlxuICAvKipcbiAgICogUmVuZGVycyBhIGRlYnVnZ2luZyBvdmVybGF5IHRvIHZpc3VhbGl6ZSB0b3VjaCB0YXJnZXQgd2l0aCBoaXRTbG9wIChtaWdodCBub3Qgd29yayBvbiBBbmRyb2lkKS5cbiAgICovXG4gIHJlbmRlckRlYnVnVmlldzogKHtcbiAgICBjb2xvcixcbiAgICBoaXRTbG9wLFxuICB9OiB7XG4gICAgY29sb3I6IHN0cmluZyB8IG51bWJlcixcbiAgICBoaXRTbG9wOiBFZGdlSW5zZXRzUHJvcCxcbiAgICAuLi5cbiAgfSk6IG51bGwgfCBSZWFjdC5Ob2RlID0+IHtcbiAgICBpZiAoIVRvdWNoYWJsZS5UT1VDSF9UQVJHRVRfREVCVUcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoIV9fREVWX18pIHtcbiAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAnVG91Y2hhYmxlLlRPVUNIX1RBUkdFVF9ERUJVRyBzaG91bGQgbm90IGJlIGVuYWJsZWQgaW4gcHJvZCEnLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgZGVidWdIaXRTbG9wU3R5bGUgPSB7fTtcbiAgICBoaXRTbG9wID0gaGl0U2xvcCB8fCB7dG9wOiAwLCBib3R0b206IDAsIGxlZnQ6IDAsIHJpZ2h0OiAwfTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBoaXRTbG9wKSB7XG4gICAgICBkZWJ1Z0hpdFNsb3BTdHlsZVtrZXldID0gLWhpdFNsb3Bba2V5XTtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZENvbG9yID0gbm9ybWFsaXplQ29sb3IoY29sb3IpO1xuICAgIGlmICh0eXBlb2Ygbm9ybWFsaXplZENvbG9yICE9PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGhleENvbG9yID1cbiAgICAgICcjJyArICgnMDAwMDAwMDAnICsgbm9ybWFsaXplZENvbG9yLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC04KTtcbiAgICByZXR1cm4gKFxuICAgICAgPFZpZXdcbiAgICAgICAgcG9pbnRlckV2ZW50cz1cIm5vbmVcIlxuICAgICAgICBzdHlsZT17W1xuICAgICAgICAgIHN0eWxlcy5kZWJ1ZyxcbiAgICAgICAgICAvKiAkRmxvd0ZpeE1lKD49MC4xMTEuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50IHN1cHByZXNzZXNcbiAgICAgICAgICAgKiBhbiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuMTExIHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvcixcbiAgICAgICAgICAgKiBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgICAgICB7XG4gICAgICAgICAgICBib3JkZXJDb2xvcjogaGV4Q29sb3Iuc2xpY2UoMCwgLTIpICsgJzU1JywgLy8gTW9yZSBvcGFxdWVcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogaGV4Q29sb3Iuc2xpY2UoMCwgLTIpICsgJzBGJywgLy8gTGVzcyBvcGFxdWVcbiAgICAgICAgICAgIC4uLmRlYnVnSGl0U2xvcFN0eWxlLFxuICAgICAgICAgIH0sXG4gICAgICAgIF19XG4gICAgICAvPlxuICAgICk7XG4gIH0sXG59O1xuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIGRlYnVnOiB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgYm9yZGVyV2lkdGg6IDEsXG4gICAgYm9yZGVyU3R5bGU6ICdkYXNoZWQnLFxuICB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVG91Y2hhYmxlO1xuIl19